webpackJsonp([1],{"/mff":function(e,t){},"1CgI":function(e,t){},"27UI":function(e,t){},"30+E":function(e,t){},"AL/Z":function(e,t,a){"use strict";function o(e,t){for(var a,o={},r={s:{c:1e7,r:1e7},e:{c:0,r:0}},l=0;l!=e.length;++l)for(var n=0;n!=e[l].length;++n){r.s.r>l&&(r.s.r=l),r.s.c>n&&(r.s.c=n),r.e.r<l&&(r.e.r=l),r.e.c<n&&(r.e.c=n);var i={v:e[l][n]};if(null!=i.v){var s=XLSX.utils.encode_cell({c:n,r:l});"number"==typeof i.v?i.t="n":"boolean"==typeof i.v?i.t="b":i.v instanceof Date?(i.t="n",i.z=XLSX.SSF._table[14],i.v=(a=i.v,void 0&&(a+=1462),(Date.parse(a)-new Date(Date.UTC(1899,11,30)))/864e5)):i.t="s",o[s]=i}}return r.s.c<1e7&&(o["!ref"]=XLSX.utils.encode_range(r)),o}function r(){if(!(this instanceof r))return new r;this.SheetNames=[],this.Sheets={}}function l(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),o=0;o!=e.length;++o)a[o]=255&e.charCodeAt(o);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.export_table_to_excel=function(e){var t=document.getElementById(e);console.log("a");var a=function(e){for(var t=[],a=e.querySelectorAll("tr"),o=[],r=0;r<a.length;++r){for(var l=[],n=a[r],i=n.querySelectorAll("td"),s=0;s<i.length;++s){var c=i[s],u=c.getAttribute("colspan"),d=c.getAttribute("rowspan"),m=c.innerText;if(""!==m&&m==+m&&(m=+m),o.forEach(function(e){if(r>=e.s.r&&r<=e.e.r&&l.length>=e.s.c&&l.length<=e.e.c)for(var t=0;t<=e.e.c-e.s.c;++t)l.push(null)}),(d||u)&&(d=d||1,u=u||1,o.push({s:{r:r,c:l.length},e:{r:r+d-1,c:l.length+u-1}})),l.push(""!==m?m:null),u)for(var v=0;v<u-1;++v)l.push(null)}t.push(l)}return[t,o]}(t),n=a[1],i=a[0];console.log(i);var s=new r,c=o(i);c["!merges"]=n,s.SheetNames.push("SheetJS"),s.Sheets.SheetJS=c;var u=XLSX.write(s,{bookType:"xlsx",bookSST:!1,type:"binary"});saveAs(new Blob([l(u)],{type:"application/octet-stream"}),"test.xlsx")},t.export_json_to_excel=function(e,t,a){var n=t;n.unshift(e);var i=new r,s=o(n);i.SheetNames.push("SheetJS"),i.Sheets.SheetJS=s;var c=XLSX.write(i,{bookType:"xlsx",bookSST:!1,type:"binary"}),u=a||"列表";saveAs(new Blob([l(c)],{type:"application/octet-stream"}),u+".xlsx")},a("aOHy"),a("D5b9"),a("Ia/g")},D5b9:function(e,t){
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
!function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(e){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},a=function(){this.data=[]},o=function(e,t,a){this.data=e,this.size=e.length,this.type=t,this.encoding=a},r=a.prototype,l=o.prototype,n=e.FileReaderSync,i=function(e){this.code=this[this.name=e]},s="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=s.length,u=e.URL||e.webkitURL||e,d=u.createObjectURL,m=u.revokeObjectURL,v=u,p=e.btoa,f=e.atob,h=e.ArrayBuffer,x=e.Uint8Array;for(o.fake=l.fake=!0;c--;)i.prototype[s[c]]=c+1;return u.createObjectURL||(v=e.URL={}),v.createObjectURL=function(e){var t,a=e.type;return null===a&&(a="application/octet-stream"),e instanceof o?(t="data:"+a,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):p?t+";base64,"+p(e.data):t+","+encodeURIComponent(e.data)):d?d.call(u,e):void 0},v.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&m&&m.call(u,e)},r.append=function(e){var a=this.data;if(x&&(e instanceof h||e instanceof x)){for(var r="",l=new x(e),s=0,c=l.length;s<c;s++)r+=String.fromCharCode(l[s]);a.push(r)}else if("Blob"===t(e)||"File"===t(e)){if(!n)throw new i("NOT_READABLE_ERR");var u=new n;a.push(u.readAsBinaryString(e))}else e instanceof o?"base64"===e.encoding&&f?a.push(f(e.data)):"URI"===e.encoding?a.push(decodeURIComponent(e.data)):"raw"===e.encoding&&a.push(e.data):("string"!=typeof e&&(e+=""),a.push(unescape(encodeURIComponent(e))))},r.getBlob=function(e){return arguments.length||(e=null),new o(this.data.join(""),e,"raw")},r.toString=function(){return"[object BlobBuilder]"},l.slice=function(e,t,a){var r=arguments.length;return r<3&&(a=null),new o(this.data.slice(e,r>1?t:this.data.length),a,this.encoding)},l.toString=function(){return"[object Blob]"},l.close=function(){this.size=this.data.length=0},a}(e);e.Blob=function(e,a){var o=a&&a.type||"",r=new t;if(e)for(var l=0,n=e.length;l<n;l++)r.append(e[l]);return r.getBlob(o)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this)},GOjW:function(e,t){},IBeU:function(e,t){e.exports=[{value:"110000",text:"北京市",children:[{value:"110101",text:"东城区"},{value:"110102",text:"西城区"},{value:"110103",text:"崇文区"},{value:"110104",text:"宣武区"},{value:"110105",text:"朝阳区"},{value:"110106",text:"丰台区"},{value:"110107",text:"石景山区"},{value:"110108",text:"海淀区"},{value:"110109",text:"门头沟区"},{value:"110111",text:"房山区"},{value:"110112",text:"通州区"},{value:"110113",text:"顺义区"},{value:"110114",text:"昌平区"},{value:"110115",text:"大兴区"},{value:"110116",text:"怀柔区"},{value:"110117",text:"平谷区"},{value:"110228",text:"密云县"},{value:"110229",text:"延庆县"},{value:"110230",text:"其它区"}]},{value:"120000",text:"天津市",children:[{value:"120101",text:"和平区"},{value:"120102",text:"河东区"},{value:"120103",text:"河西区"},{value:"120104",text:"南开区"},{value:"120105",text:"河北区"},{value:"120106",text:"红桥区"},{value:"120107",text:"塘沽区"},{value:"120108",text:"汉沽区"},{value:"120109",text:"大港区"},{value:"120110",text:"东丽区"},{value:"120111",text:"西青区"},{value:"120112",text:"津南区"},{value:"120113",text:"北辰区"},{value:"120114",text:"武清区"},{value:"120115",text:"宝坻区"},{value:"120116",text:"滨海新区"},{value:"120221",text:"宁河县"},{value:"120223",text:"静海县"},{value:"120225",text:"蓟县"},{value:"120226",text:"其它区"}]},{value:"130000",text:"河北省",children:[{value:"130100",text:"石家庄市"},{value:"130200",text:"唐山市"},{value:"130300",text:"秦皇岛市"},{value:"130400",text:"邯郸市"},{value:"130500",text:"邢台市"},{value:"130600",text:"保定市"},{value:"130700",text:"张家口市"},{value:"130800",text:"承德市"},{value:"130900",text:"沧州市"},{value:"131000",text:"廊坊市"},{value:"131100",text:"衡水市"}]},{value:"140000",text:"山西省",children:[{value:"140100",text:"太原市"},{value:"140200",text:"大同市"},{value:"140300",text:"阳泉市"},{value:"140400",text:"长治市"},{value:"140500",text:"晋城市"},{value:"140600",text:"朔州市"},{value:"140700",text:"晋中市"},{value:"140800",text:"运城市"},{value:"140900",text:"忻州市"},{value:"141000",text:"临汾市"},{value:"141100",text:"吕梁市"}]},{value:"150000",text:"内蒙古",children:[{value:"150100",text:"呼和浩特市"},{value:"150200",text:"包头市"},{value:"150300",text:"乌海市"},{value:"150400",text:"赤峰市"},{value:"150500",text:"通辽市"},{value:"150600",text:"鄂尔多斯市"},{value:"150700",text:"呼伦贝尔市"},{value:"150800",text:"巴彦淖尔市"},{value:"150900",text:"乌兰察布市"},{value:"152200",text:"兴安盟"},{value:"152500",text:"锡林郭勒盟"},{value:"152900",text:"阿拉善盟"}]},{value:"210000",text:"辽宁省",children:[{value:"210100",text:"沈阳市"},{value:"210200",text:"大连市"},{value:"210300",text:"鞍山市"},{value:"210400",text:"抚顺市"},{value:"210500",text:"本溪市"},{value:"210600",text:"丹东市"},{value:"210700",text:"锦州市"},{value:"210800",text:"营口市"},{value:"210900",text:"阜新市"},{value:"211000",text:"辽阳市"},{value:"211100",text:"盘锦市"},{value:"211200",text:"铁岭市"},{value:"211300",text:"朝阳市"},{value:"211400",text:"葫芦岛市"}]},{value:"220000",text:"吉林省",children:[{value:"220100",text:"长春市"},{value:"220200",text:"吉林市"},{value:"220300",text:"四平市"},{value:"220400",text:"辽源市"},{value:"220500",text:"通化市"},{value:"220600",text:"白山市"},{value:"220700",text:"松原市"},{value:"220800",text:"白城市"},{value:"222400",text:"延边朝鲜族自治州"}]},{value:"230000",text:"黑龙江省",children:[{value:"230100",text:"哈尔滨市"},{value:"230200",text:"齐齐哈尔市"},{value:"230300",text:"鸡西市"},{value:"230400",text:"鹤岗市"},{value:"230500",text:"双鸭山市"},{value:"230600",text:"大庆市"},{value:"230700",text:"伊春市"},{value:"230800",text:"佳木斯市"},{value:"230900",text:"七台河市"},{value:"231000",text:"牡丹江市"},{value:"231100",text:"黑河市"},{value:"231200",text:"绥化市"},{value:"232700",text:"大兴安岭地区"}]},{value:"310000",text:"上海市",children:[{value:"310101",text:"黄浦区"},{value:"310103",text:"卢湾区"},{value:"310104",text:"徐汇区"},{value:"310105",text:"长宁区"},{value:"310106",text:"静安区"},{value:"310107",text:"普陀区"},{value:"310108",text:"闸北区"},{value:"310109",text:"虹口区"},{value:"310110",text:"杨浦区"},{value:"310112",text:"闵行区"},{value:"310113",text:"宝山区"},{value:"310114",text:"嘉定区"},{value:"310115",text:"浦东新区"},{value:"310116",text:"金山区"},{value:"310117",text:"松江区"},{value:"310118",text:"青浦区"},{value:"310119",text:"南汇区"},{value:"310120",text:"奉贤区"},{value:"310152",text:"川沙区"},{value:"310230",text:"崇明县"},{value:"310231",text:"其它区"}]},{value:"320000",text:"江苏省",children:[{value:"320100",text:"南京市"},{value:"320200",text:"无锡市"},{value:"320300",text:"徐州市"},{value:"320400",text:"常州市"},{value:"320500",text:"苏州市"},{value:"320600",text:"南通市"},{value:"320700",text:"连云港市"},{value:"320800",text:"淮安市"},{value:"320900",text:"盐城市"},{value:"321000",text:"扬州市"},{value:"321100",text:"镇江市"},{value:"321200",text:"泰州市"},{value:"321300",text:"宿迁市"}]},{value:"330000",text:"浙江省",children:[{value:"330100",text:"杭州市"},{value:"330200",text:"宁波市"},{value:"330300",text:"温州市"},{value:"330400",text:"嘉兴市"},{value:"330500",text:"湖州市"},{value:"330600",text:"绍兴市"},{value:"330700",text:"金华市"},{value:"330800",text:"衢州市"},{value:"330900",text:"舟山市"},{value:"331000",text:"台州市"},{value:"331100",text:"丽水市"}]},{value:"340000",text:"安徽省",children:[{value:"340100",text:"合肥市"},{value:"340200",text:"芜湖市"},{value:"340300",text:"蚌埠市"},{value:"340400",text:"淮南市"},{value:"340500",text:"马鞍山市"},{value:"340600",text:"淮北市"},{value:"340700",text:"铜陵市"},{value:"340800",text:"安庆市"},{value:"341000",text:"黄山市"},{value:"341100",text:"滁州市"},{value:"341200",text:"阜阳市"},{value:"341300",text:"宿州市"},{value:"341500",text:"六安市"},{value:"341600",text:"亳州市"},{value:"341700",text:"池州市"},{value:"341800",text:"宣城市"}]},{value:"350000",text:"福建省",children:[{value:"350100",text:"福州市"},{value:"350200",text:"厦门市"},{value:"350300",text:"莆田市"},{value:"350400",text:"三明市"},{value:"350500",text:"泉州市"},{value:"350600",text:"漳州市"},{value:"350700",text:"南平市"},{value:"350800",text:"龙岩市"},{value:"350900",text:"宁德市"}]},{value:"360000",text:"江西省",children:[{value:"360100",text:"南昌市"},{value:"360200",text:"景德镇市"},{value:"360300",text:"萍乡市"},{value:"360400",text:"九江市"},{value:"360500",text:"新余市"},{value:"360600",text:"鹰潭市"},{value:"360700",text:"赣州市"},{value:"360800",text:"吉安市"},{value:"360900",text:"宜春市"},{value:"361000",text:"抚州市"},{value:"361100",text:"上饶市"}]},{value:"370000",text:"山东省",children:[{value:"370100",text:"济南市"},{value:"370200",text:"青岛市"},{value:"370300",text:"淄博市"},{value:"370400",text:"枣庄市"},{value:"370500",text:"东营市"},{value:"370600",text:"烟台市"},{value:"370700",text:"潍坊市"},{value:"370800",text:"济宁市"},{value:"370900",text:"泰安市"},{value:"371000",text:"威海市"},{value:"371100",text:"日照市"},{value:"371200",text:"莱芜市"},{value:"371300",text:"临沂市"},{value:"371400",text:"德州市"},{value:"371500",text:"聊城市"},{value:"371600",text:"滨州市"},{value:"371700",text:"菏泽市"}]},{value:"410000",text:"河南省",children:[{value:"410100",text:"郑州市"},{value:"410200",text:"开封市"},{value:"410300",text:"洛阳市"},{value:"410400",text:"平顶山市"},{value:"410500",text:"安阳市"},{value:"410600",text:"鹤壁市"},{value:"410700",text:"新乡市"},{value:"410800",text:"焦作市"},{value:"410881",text:"济源市"},{value:"410900",text:"濮阳市"},{value:"411000",text:"许昌市"},{value:"411100",text:"漯河市"},{value:"411200",text:"三门峡市"},{value:"411300",text:"南阳市"},{value:"411400",text:"商丘市"},{value:"411500",text:"信阳市"},{value:"411600",text:"周口市"},{value:"411700",text:"驻马店市"}]},{value:"420000",text:"湖北省",children:[{value:"420100",text:"武汉市"},{value:"420200",text:"黄石市"},{value:"420300",text:"十堰市"},{value:"420500",text:"宜昌市"},{value:"420600",text:"襄阳市"},{value:"420700",text:"鄂州市"},{value:"420800",text:"荆门市"},{value:"420900",text:"孝感市"},{value:"421000",text:"荆州市"},{value:"421100",text:"黄冈市"},{value:"421200",text:"咸宁市"},{value:"421300",text:"随州市"},{value:"422800",text:"恩施土家族苗族自治州"},{value:"429004",text:"仙桃市"},{value:"429005",text:"潜江市"},{value:"429006",text:"天门市"},{value:"429021",text:"神农架林区"}]},{value:"430000",text:"湖南省",children:[{value:"430100",text:"长沙市"},{value:"430200",text:"株洲市"},{value:"430300",text:"湘潭市"},{value:"430400",text:"衡阳市"},{value:"430500",text:"邵阳市"},{value:"430600",text:"岳阳市"},{value:"430700",text:"常德市"},{value:"430800",text:"张家界市"},{value:"430900",text:"益阳市"},{value:"431000",text:"郴州市"},{value:"431100",text:"永州市"},{value:"431200",text:"怀化市"},{value:"431300",text:"娄底市"},{value:"433100",text:"湘西土家族苗族自治州"}]},{value:"440000",text:"广东省",children:[{value:"440100",text:"广州市"},{value:"440200",text:"韶关市"},{value:"440300",text:"深圳市"},{value:"440400",text:"珠海市"},{value:"440500",text:"汕头市"},{value:"440600",text:"佛山市"},{value:"440700",text:"江门市"},{value:"440800",text:"湛江市"},{value:"440900",text:"茂名市"},{value:"441200",text:"肇庆市"},{value:"441300",text:"惠州市"},{value:"441400",text:"梅州市"},{value:"441500",text:"汕尾市"},{value:"441600",text:"河源市"},{value:"441700",text:"阳江市"},{value:"441800",text:"清远市"},{value:"441900",text:"东莞市"},{value:"442000",text:"中山市"},{value:"445100",text:"潮州市"},{value:"445200",text:"揭阳市"},{value:"445300",text:"云浮市"}]},{value:"450000",text:"广西壮族",children:[{value:"450100",text:"南宁市"},{value:"450200",text:"柳州市"},{value:"450300",text:"桂林市"},{value:"450400",text:"梧州市"},{value:"450500",text:"北海市"},{value:"450600",text:"防城港市"},{value:"450700",text:"钦州市"},{value:"450800",text:"贵港市"},{value:"450900",text:"玉林市"},{value:"451000",text:"百色市"},{value:"451100",text:"贺州市"},{value:"451200",text:"河池市"},{value:"451300",text:"来宾市"},{value:"451400",text:"崇左市"}]},{value:"460000",text:"海南省",children:[{value:"460100",text:"海口市"},{value:"460200",text:"三亚市"},{value:"469001",text:"五指山市"},{value:"469002",text:"琼海市"},{value:"469003",text:"儋州市"},{value:"469005",text:"文昌市"},{value:"469006",text:"万宁市"},{value:"469007",text:"东方市"},{value:"469025",text:"定安县"},{value:"469026",text:"屯昌县"},{value:"469027",text:"澄迈县"},{value:"469028",text:"临高县"},{value:"469030",text:"白沙黎族自治县"},{value:"469031",text:"昌江黎族自治县"},{value:"469033",text:"乐东黎族自治县"},{value:"469034",text:"陵水黎族自治县"},{value:"469035",text:"保亭黎族苗族自治县"},{value:"469036",text:"琼中黎族苗族自治县"},{value:"469037",text:"西沙群岛"},{value:"469038",text:"南沙群岛"},{value:"469039",text:"中沙群岛的岛礁及其海域"}]},{value:"500000",text:"重庆",children:[{value:"500101",text:"万州区"},{value:"500102",text:"涪陵区"},{value:"500103",text:"渝中区"},{value:"500104",text:"大渡口区"},{value:"500105",text:"江北区"},{value:"500106",text:"沙坪坝区"},{value:"500107",text:"九龙坡区"},{value:"500108",text:"南岸区"},{value:"500109",text:"北碚区"},{value:"500110",text:"万盛区"},{value:"500111",text:"双桥区"},{value:"500112",text:"渝北区"},{value:"500113",text:"巴南区"},{value:"500114",text:"黔江区"},{value:"500115",text:"长寿区"},{value:"500222",text:"綦江县"},{value:"500223",text:"潼南县"},{value:"500224",text:"铜梁县"},{value:"500225",text:"大足县"},{value:"500226",text:"荣昌县"},{value:"500227",text:"璧山县"},{value:"500228",text:"梁平县"},{value:"500229",text:"城口县"},{value:"500230",text:"丰都县"},{value:"500231",text:"垫江县"},{value:"500232",text:"武隆县"},{value:"500233",text:"忠县"},{value:"500234",text:"开县"},{value:"500235",text:"云阳县"},{value:"500236",text:"奉节县"},{value:"500237",text:"巫山县"},{value:"500238",text:"巫溪县"},{value:"500240",text:"石柱土家族自治县"},{value:"500241",text:"秀山土家族苗族自治县"},{value:"500242",text:"酉阳土家族苗族自治县"},{value:"500243",text:"彭水苗族土家族自治县"},{value:"500381",text:"江津区"},{value:"500382",text:"合川区"},{value:"500383",text:"永川区"},{value:"500384",text:"南川区"},{value:"500385",text:"其它区"}]},{value:"510000",text:"四川省",children:[{value:"510100",text:"成都市"},{value:"510300",text:"自贡市"},{value:"510400",text:"攀枝花市"},{value:"510500",text:"泸州市"},{value:"510600",text:"德阳市"},{value:"510700",text:"绵阳市"},{value:"510800",text:"广元市"},{value:"510900",text:"遂宁市"},{value:"511000",text:"内江市"},{value:"511100",text:"乐山市"},{value:"511300",text:"南充市"},{value:"511400",text:"眉山市"},{value:"511500",text:"宜宾市"},{value:"511600",text:"广安市"},{value:"511700",text:"达州市"},{value:"511800",text:"雅安市"},{value:"511900",text:"巴中市"},{value:"512000",text:"资阳市"},{value:"513200",text:"阿坝藏族羌族自治州"},{value:"513300",text:"甘孜藏族自治州"},{value:"513400",text:"凉山彝族自治州"}]},{value:"520000",text:"贵州省",children:[{value:"520100",text:"贵阳市"},{value:"520200",text:"六盘水市"},{value:"520300",text:"遵义市"},{value:"520400",text:"安顺市"},{value:"522200",text:"铜仁地区"},{value:"522300",text:"黔西南布依族苗族自治州"},{value:"522400",text:"毕节地区"},{value:"522600",text:"黔东南苗族侗族自治州"},{value:"522700",text:"黔南布依族苗族自治州"}]},{value:"530000",text:"云南省",children:[{value:"530100",text:"昆明市"},{value:"530300",text:"曲靖市"},{value:"530400",text:"玉溪市"},{value:"530500",text:"保山市"},{value:"530600",text:"昭通市"},{value:"530700",text:"丽江市"},{value:"530800",text:"普洱市"},{value:"530900",text:"临沧市"},{value:"532300",text:"楚雄彝族自治州"},{value:"532500",text:"红河哈尼族彝族自治州"},{value:"532600",text:"文山壮族苗族自治州"},{value:"532800",text:"西双版纳傣族自治州"},{value:"532900",text:"大理白族自治州"},{value:"533100",text:"德宏傣族景颇族自治州"},{value:"533300",text:"怒江傈僳族自治州"},{value:"533400",text:"迪庆藏族自治州"}]},{value:"540000",text:"西藏",children:[{value:"540100",text:"拉萨市"},{value:"542100",text:"昌都地区"},{value:"542200",text:"山南地区"},{value:"542300",text:"日喀则地区"},{value:"542400",text:"那曲地区"},{value:"542500",text:"阿里地区"},{value:"542600",text:"林芝地区"}]},{value:"610000",text:"陕西省",children:[{value:"610100",text:"西安市"},{value:"610200",text:"铜川市"},{value:"610300",text:"宝鸡市"},{value:"610400",text:"咸阳市"},{value:"610500",text:"渭南市"},{value:"610600",text:"延安市"},{value:"610700",text:"汉中市"},{value:"610800",text:"榆林市"},{value:"610900",text:"安康市"},{value:"611000",text:"商洛市"}]},{value:"620000",text:"甘肃省",children:[{value:"620100",text:"兰州市"},{value:"620200",text:"嘉峪关市"},{value:"620300",text:"金昌市"},{value:"620400",text:"白银市"},{value:"620500",text:"天水市"},{value:"620600",text:"武威市"},{value:"620700",text:"张掖市"},{value:"620800",text:"平凉市"},{value:"620900",text:"酒泉市"},{value:"621000",text:"庆阳市"},{value:"621100",text:"定西市"},{value:"621200",text:"陇南市"},{value:"622900",text:"临夏回族自治州"},{value:"623000",text:"甘南藏族自治州"}]},{value:"630000",text:"青海省",children:[{value:"630100",text:"西宁市"},{value:"632100",text:"海东地区"},{value:"632200",text:"海北藏族自治州"},{value:"632300",text:"黄南藏族自治州"},{value:"632500",text:"海南藏族自治州"},{value:"632600",text:"果洛藏族自治州"},{value:"632700",text:"玉树藏族自治州"},{value:"632800",text:"海西蒙古族藏族自治州"}]},{value:"640000",text:"宁夏",children:[{value:"640100",text:"银川市"},{value:"640200",text:"石嘴山市"},{value:"640300",text:"吴忠市"},{value:"640400",text:"固原市"},{value:"640500",text:"中卫市"}]},{value:"650000",text:"新疆",children:[{value:"650100",text:"乌鲁木齐市"},{value:"650200",text:"克拉玛依市"},{value:"652100",text:"吐鲁番地区"},{value:"652200",text:"哈密地区"},{value:"652300",text:"昌吉回族自治州"},{value:"652700",text:"博尔塔拉蒙古自治州"},{value:"652800",text:"巴音郭楞蒙古自治州"},{value:"652900",text:"阿克苏地区"},{value:"653000",text:"克孜勒苏柯尔克孜自治州"},{value:"653100",text:"喀什地区"},{value:"653200",text:"和田地区"},{value:"654000",text:"伊犁哈萨克自治州"},{value:"654200",text:"塔城地区"},{value:"654300",text:"阿勒泰地区"},{value:"659001",text:"石河子市"},{value:"659002",text:"阿拉尔市"},{value:"659003",text:"图木舒克市"},{value:"659004",text:"五家渠市"}]},{value:"710000",text:"台湾省",children:[{value:"710100",text:"台北市"},{value:"710200",text:"高雄市"},{value:"710300",text:"台南市"},{value:"710400",text:"台中市"},{value:"710500",text:"金门县"},{value:"710600",text:"南投县"},{value:"710700",text:"基隆市"},{value:"710800",text:"新竹市"},{value:"710900",text:"嘉义市"},{value:"711100",text:"新北市"},{value:"711200",text:"宜兰县"},{value:"711300",text:"新竹县"},{value:"711400",text:"桃园县"},{value:"711500",text:"苗栗县"},{value:"711700",text:"彰化县"},{value:"711900",text:"嘉义县"},{value:"712100",text:"云林县"},{value:"712400",text:"屏东县"},{value:"712500",text:"台东县"},{value:"712600",text:"花莲县"},{value:"712700",text:"澎湖县"}]},{value:"810000",text:"香港",children:[{value:"810100",text:"香港岛"},{value:"810200",text:"九龙"},{value:"810300",text:"新界"}]},{value:"820000",text:"澳门",children:[{value:"820100",text:"澳门半岛"},{value:"820200",text:"离岛"}]},{value:"990000",text:"海外",children:[{value:"990100",text:"海外"}]}]},"JOP+":function(e,t){},MMI3:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var l=a("VU/8")({name:"App"},r,!1,function(e){a("s347")},null,null).exports,n=a("/ocq"),i=a("mvHQ"),s=a.n(i),c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-header",{staticStyle:{"background-color":"#ffc940bd"}},[t("el-row",{staticStyle:{height:"100%"}},[t("el-col",{staticClass:"icon"}),this._v(" "),t("el-col")],1)],1)},staticRenderFns:[]};var u=a("VU/8")({name:"Header"},c,!1,function(e){a("pVwh")},null,null).exports,d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-footer",{staticStyle:{"background-color":"#FFC940"}},[t("el-row",{staticStyle:{height:"100%"}},[t("el-col",{staticClass:"icon"}),this._v(" "),t("el-col")],1)],1)},staticRenderFns:[]};var m=a("VU/8")({name:"Footer"},d,!1,function(e){a("U8AM")},null,null).exports,v=a("NC6I"),p=a.n(v),f={name:"Login",components:{TestHeader:u,TestFooter:m},data:function(){return{loginInfo:{username:"",password:"",type:"admin"},responseResult:[],loginRules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],type:[{required:!0,message:"请选择用户类型",trigger:"change"}]}}},methods:{login:function(){var e=this;this.$refs.loginInfo.validate(function(t){if(!t)return!1;var a=p()(e.loginInfo.password);e.$axios.post("/user/login",{username:e.loginInfo.username,password:a,type:e.loginInfo.type}).then(function(t){if(t.data.success){var a=t.data;localStorage.setItem("token",a.token),console.log("login",a.data),"admin"===e.loginInfo.type?(localStorage.setItem("name",a.data.aid),localStorage.setItem("currAdmin",s()(a.data)),e.$router.push({name:"admin"})):(localStorage.setItem("name",a.data.aid),localStorage.setItem("currFrontUser",s()(a.data)),e.$router.push({name:"frontUser"}))}else e.$message.error(t.data.message)}).catch(function(t){e.$message.error(t)})})},register:function(){this.$router.push({path:"/register"})},resetForm:function(e){this.$refs[e].resetFields()}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"700px"}},[a("el-main",[a("el-card",{staticStyle:{width:"450px",height:"330px",margin:"auto"},attrs:{shadow:"always"}},[a("div",[a("h1",{staticStyle:{"margin-top":"10px"}},[e._v("登录")]),e._v(" "),a("el-form",{ref:"loginInfo",staticStyle:{margin:"20px"},attrs:{rules:e.loginRules,model:e.loginInfo,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.loginInfo.username,callback:function(t){e.$set(e.loginInfo,"username",t)},expression:"loginInfo.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.loginInfo.password,callback:function(t){e.$set(e.loginInfo,"password",t)},expression:"loginInfo.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.loginInfo.type,callback:function(t){e.$set(e.loginInfo,"type",t)},expression:"loginInfo.type"}},[a("el-option",{attrs:{label:"前台",value:"frontUser"}}),e._v(" "),a("el-option",{attrs:{label:"酒店管理员",value:"admin"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.register}},[e._v("注册")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("loginInfo")}}},[e._v("重置")])],1)],1)],1)])],1)],1)},staticRenderFns:[]};var x=a("VU/8")(f,h,!1,function(e){a("bwPF")},"data-v-e453671e",null).exports,g=a("RRo+"),b=a.n(g),w=this,y={name:"GlobalVariable",validatePwd:function(e,t,a){""===t?a(new Error("密码不能为空")):/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[a-zA-Z\d]{6,12}$/.test(t)?(""!==w.newUserInfo.checkPwd&&w.$refs.newUserInfo.validateField("checkPwd"),a()):a(new Error("密码应包含至少一个大写字母、小写字母和数字，且长度为6-12个字符"))},validatePwd2:function(e,t,a){""===t?a(new Error("请再次输入密码")):t!==w.newUserInfo.password?a(new Error("两次输入密码不一致")):a()},validateUserName:function(e,t,a){""===t?a(new Error("用户名不能为空")):/^[a-zA-Z0-9_\u4E00-\u9FA5]{6,12}$/.test(t)||a(new Error("用户名只能含大小写字母、数字、下划线和中文字符，长度为6-12位"));a()},validateName:function(e,t,a){""===t?a(new Error("姓名不能为空")):/^[\u4E00-\u9FA5]{2,5}$/.test(t)||a(new Error("请输入正确中文姓名"));a()},validateIdCard:function(e,t,a){""===t?a(new Error("身份证号不能为空")):(/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(t)||a(new Error("请输入正确的身份证号码")),a())},validateEmail:function(e,t,a){""===t?a(new Error("邮箱地址不能为空")):(/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/.test(t)||a(new Error("邮箱格式不正确")),a())},validatePrice:function(e,t,a){t?(b()(t)?t<0&&a(new Error("必须大于0")):a(new Error("必须为数字")),a()):a(new Error("该项不能为空"))},configOptions:["wifi","空调","有窗","独卫","麻将桌","早餐"],roomTypes:[{roomType:"大床房",bedCount:2},{roomType:"标准间",bedCount:2},{roomType:"三人房",bedCount:3},{roomType:"套房（两人）",bedCount:2}],roomStatus:[{label:"空房干净",value:"EC"},{label:"空房待打扫",value:"ED"},{label:"住人已打扫",value:"C"},{label:"住人待打扫",value:"D"}],data:function(){return{newRoomTypes:[]}},mounted:function(){this.initializeRoomType()},methods:{initializeRoomType:function(){}}},_={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var k=a("VU/8")(y,_,!1,function(e){a("WB+h")},"data-v-a720aba6",null).exports,F={name:"AddUser",components:{TestHeader:u,TestFooter:m},data:function(){var e=this;return{newUserInfo:{userName:"",idCard:"",password:"",checkPwd:"",emailAddress:"",realName:"",type:"admin"},addUserRules:{userName:[{validator:k.validateUserName,trigger:"blur"}],idCard:[{validator:k.validateIdCard,trigger:"blur"}],password:[{validator:function(t,a,o){""===a?o(new Error("密码不能为空")):/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[a-zA-Z\d]{6,12}$/.test(a)?(""!==e.newUserInfo.checkPwd&&e.$refs.newUserInfo.validateField("checkPwd"),o()):o(new Error("密码应包含至少一个大写字母、小写字母和数字，且长度为6-12个字符"))},trigger:"blur"}],checkPwd:[{validator:function(t,a,o){""===a?o(new Error("请再次输入密码")):a!==e.newUserInfo.password?o(new Error("两次输入密码不一致")):o()},trigger:"blur"}],emailAddress:[{validator:k.validateEmail,trigger:"blur"}],realName:[{validator:k.validateName,trigger:"blur"}]}}},methods:{addUser:function(){var e=this;this.$refs.newUserInfo.validate(function(t){if(!t)return!1;var a=p()(e.newUserInfo.password);e.$axios.post("user/register",{userName:e.newUserInfo.userName,idCard:e.newUserInfo.idCard,password:a,emailAddress:e.newUserInfo.emailAddress,realName:e.newUserInfo.realName,type:e.newUserInfo.type}).then(function(t){t.data.data?(e.$message.success("注册成功，请登录！"),e.$router.push("login")):e.$message.error(t.data.message)}).catch(function(t){e.$message.error("注册失败，请重试！")})})},resetForm:function(e){this.$refs[e].resetFields()},goBack:function(){this.$router.push("/login")}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"back"},[a("el-container",[a("el-main",[a("el-card",{staticStyle:{width:"600px",height:"540px",margin:"auto"},attrs:{shadow:"always"}},[a("h1",{staticStyle:{"margin-top":"10px"}},[e._v("用户注册")]),e._v(" "),a("el-form",{ref:"newUserInfo",attrs:{model:e.newUserInfo,rules:e.addUserRules,"label-width":"100px","status-icon":""}},[a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.newUserInfo.userName,callback:function(t){e.$set(e.newUserInfo,"userName",t)},expression:"newUserInfo.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"真实姓名",prop:"realName"}},[a("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},model:{value:e.newUserInfo.realName,callback:function(t){e.$set(e.newUserInfo,"realName",t)},expression:"newUserInfo.realName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号码",prop:"idCard"}},[a("el-input",{attrs:{placeholder:"请输入身份证号",clearable:""},model:{value:e.newUserInfo.idCard,callback:function(t){e.$set(e.newUserInfo,"idCard",t)},expression:"newUserInfo.idCard"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱地址",prop:"emailAddress"}},[a("el-input",{attrs:{placeholder:"请输入邮箱地址",clearable:""},model:{value:e.newUserInfo.emailAddress,callback:function(t){e.$set(e.newUserInfo,"emailAddress",t)},expression:"newUserInfo.emailAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码",clearable:""},model:{value:e.newUserInfo.password,callback:function(t){e.$set(e.newUserInfo,"password",t)},expression:"newUserInfo.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPwd"}},[a("el-input",{attrs:{type:"password",placeholder:"请再次输入密码",clearable:""},model:{value:e.newUserInfo.checkPwd,callback:function(t){e.$set(e.newUserInfo,"checkPwd",t)},expression:"newUserInfo.checkPwd"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.goBack}},[e._v("返回登录")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("newUserInfo")}}},[e._v("重置")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var R=a("VU/8")(F,$,!1,function(e){a("ONK8")},"data-v-a255705a",null).exports,S={name:"Index",components:{testheader:u,testfooter:m}},A={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("testheader"),this._v(" "),t("hr"),this._v(" "),t("div",[this._v("\n    这是首页！\n  ")]),this._v(" "),t("hr"),this._v(" "),t("testfooter")],1)},staticRenderFns:[]},C=a("VU/8")(S,A,!1,null,null,null).exports,T={data:function(){var e=this;return{chgPwdWinShow:!1,changePasswordForm:{oldPwd:"",password:"",checkPwd:""},pwdRules:{oldPwd:[{required:!0,message:"该项不能为空",trigger:"blur"}],password:[{validator:function(t,a,o){""===a?o(new Error("密码不能为空")):/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[a-zA-Z\d]{6,12}$/.test(a)?(""!==e.changePasswordForm.checkPwd&&e.$refs.changePasswordForm.validateField("checkPwd"),o()):o(new Error("密码应包含至少一个大写字母、小写字母和数字，且长度为6-12个字符"))},trigger:"blur"}],checkPwd:[{validator:function(t,a,o){""===a?o(new Error("请再次输入密码")):a!==e.changePasswordForm.password?o(new Error("两次输入密码不一致")):o()},trigger:"change"}]},activeIndex:"1",currAdmin:{},isAdmin:!1}},mounted:function(){this.currAdmin=JSON.parse(localStorage.getItem("currAdmin")),this.currFrontUser=JSON.parse(localStorage.getItem("currFrontUser")),null!=this.currAdmin?this.isAdmin=!0:this.isAdmin=!1,console.log("currFrontUser",this.currFrontUser),console.log("currAdmin",this.currAdmin)},methods:{handleSelect:function(e,t){this.$router.push(e)},openChgPwdWin:function(){this.changePasswordForm={},this.chgPwdWinShow=!0},closeChgPwdWin:function(){this.chgPwdWinShow=!1,this.$refs.changePasswordForm.resetFields()},quit:function(){localStorage.removeItem("name"),localStorage.removeItem("currAdmin"),localStorage.removeItem("currFrontUser"),this.$router.push("/login")},changePwd:function(){var e=this;this.$refs.changePasswordForm.validate(function(t){if(!t)return!1;var a=p()(e.changePasswordForm.oldPwd),o=p()(e.changePasswordForm.password),r="",l="";e.isAdmin?(r="/user/adminChangePwd",l=e.currAdmin.aid):(r="user/frontUserChangePwd",l=e.currFrontUser.userName),e.$axios.post(r,{aid:l,oldPwd:a,newPwd:o}).then(function(t){t.data.success?(e.$message.success("修改成功"),e.closeChgPwdWin()):e.$message.error(t.data.message)})})}}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-menu",{staticClass:"el-menu-demo",attrs:{router:"","default-active":e.$route.children,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[e.isAdmin?a("el-menu-item",{attrs:{index:"/admin/home"}},[e._v("主页")]):e._e(),e._v(" "),a("el-submenu",{attrs:{index:"room"}},[a("template",{slot:"title"},[e._v("客房管理")]),e._v(" "),e.isAdmin?e._e():a("el-menu-item",{attrs:{index:"/frontUser/room/checkIn"}},[e._v("入住退房")]),e._v(" "),e.isAdmin?a("el-menu-item",{attrs:{index:"/admin/room/status"}},[e._v("房态")]):e._e()],2),e._v(" "),a("el-menu-item",{attrs:{index:"/order"}},[e._v("订单查看")]),e._v(" "),e.isAdmin?a("el-submenu",{attrs:{index:"report"}},[a("template",{slot:"title"},[e._v("财务管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"/admin/report/set"}},[e._v("数值设置")]),e._v(" "),a("el-menu-item",{attrs:{index:"/admin/report/days"}},[e._v("收支表")])],2):e._e(),e._v(" "),e.isAdmin?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"设置",placement:"bottom"}},[a("el-menu-item",{attrs:{index:"/admin/setting"}},[a("i",{staticClass:"el-icon-setting"})])],1):e._e(),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"退出登录",placement:"bottom"}},[a("el-button",{staticClass:"button",attrs:{icon:"el-icon-close"},on:{click:e.quit}})],1),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改密码",placement:"bottom"}},[a("el-button",{staticClass:"button",attrs:{icon:"el-icon-edit-outline"},on:{click:e.openChgPwdWin}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改密码",visible:e.chgPwdWinShow},on:{"update:visible":function(t){e.chgPwdWinShow=t},close:e.closeChgPwdWin}},[a("el-form",{ref:"changePasswordForm",attrs:{model:e.changePasswordForm,rules:e.pwdRules,"label-position":"right","label-width":"120px","status-icon":""}},[a("el-form-item",{attrs:{label:"原密码",prop:"oldPwd"}},[a("el-input",{attrs:{placeholder:"请输入原密码",type:"password",clearable:""},model:{value:e.changePasswordForm.oldPwd,callback:function(t){e.$set(e.changePasswordForm,"oldPwd",t)},expression:"changePasswordForm.oldPwd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入新密码",type:"password",clearable:""},model:{value:e.changePasswordForm.password,callback:function(t){e.$set(e.changePasswordForm,"password",t)},expression:"changePasswordForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPwd"}},[a("el-input",{attrs:{placeholder:"请再次输入新密码",type:"password",clearable:""},model:{value:e.changePasswordForm.checkPwd,callback:function(t){e.$set(e.changePasswordForm,"checkPwd",t)},expression:"changePasswordForm.checkPwd"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.changePwd}},[e._v("确认")]),e._v(" "),a("el-button",{on:{click:e.closeChgPwdWin}},[e._v("关闭")])],1)],1)],1)},staticRenderFns:[]};var D={name:"AdminIndex",components:{HomeTabs:a("VU/8")(T,N,!1,function(e){a("ccvo")},"data-v-17048617",null).exports,TestHeader:u}},I={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-container",[t("el-header",{staticStyle:{padding:"0px"}},[t("home-tabs")],1),this._v(" "),t("el-main",{staticStyle:{padding:"10px 0 10px 0","background-color":"#D3DCE6"}},[t("router-view")],1),this._v(" "),t("el-footer",{staticStyle:{"background-color":"#545c64"}})],1)],1)},staticRenderFns:[]};var U=a("VU/8")(D,I,!1,function(e){a("30+E")},"data-v-3d07cadb",null).exports,P=a("IBeU"),E=a.n(P),O={name:"Address",props:["value"],data:function(){return{options:[],props:{label:"text",value:"text"},selectedCity:this.value}},created:function(){this.options=E.a},watch:{selectedCity:function(e){this.$emit("cityChanged",e)},value:function(e){this.updateValue(e)}},methods:{updateValue:function(e){this.selectedCity=e}}},z={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-cascader",{attrs:{options:e.options,props:e.props,clearable:"",separator:"-"},model:{value:e.selectedCity,callback:function(t){e.selectedCity=t},expression:"selectedCity"}})},staticRenderFns:[]};var L={name:"HomeBody",components:{Address:a("VU/8")(O,z,!1,function(e){a("xKoU")},"data-v-89533a0e",null).exports},data:function(){return{items:[],addHotelDialog:!1,hotelForm:{hotelName:"",city:[],location:"",details:"",imgLocate:[],grade:0},suffixText:"添加",spanNum:12,imgDialog:!1,picUrl:"",currAdmin:{}}},mounted:function(){this.currAdmin=JSON.parse(localStorage.getItem("currAdmin")),this.currAdmin.haveHotel?this.suffixText="修改":this.suffixText="添加",this.initializeHotel()},methods:{initializeHotel:function(){var e=this;this.$axios.post("hotel/getHotelByAid",this.currAdmin.aid).then(function(t){t.data.success?(e.items=t.data.data.photos,null!=t.data.data&&(e.hotelForm=t.data.data,e.hotelForm.city=t.data.data.city.split("-"))):e.$message.error(t.data.message)}).catch(function(t){e.$message.error(t)})},addHotel:function(){var e=this;this.$refs.hotelForm.validate(function(t){var a="修改"===e.suffixText?"hotel/modify":"hotel/add";if(!t)return!1;e.$axios.post(a,{aid:e.currAdmin.aid,hotelName:e.hotelForm.hotelName,city:e.hotelForm.city,location:e.hotelForm.location,details:e.hotelForm.details}).then(function(t){t.data?(e.currAdmin.haveHotel=!0,localStorage.setItem("currAdmin",s()(e.currAdmin)),e.closeDialog(),e.$router.go(0)):e.$message.error("错误")}).catch(function(t){e.$message.error(t)})})},closeDialog:function(){this.addHotelDialog=!1,this.hotelForm={},this.$refs.hotelForm.resetFields()},previewPic:function(e){this.picUrl=e.url,this.imgDialog=!0},removePic:function(e,t){console.log(e,t)},checkFileTypeSize:function(e){var t=this,a="jpg"===e.name.split(".")[1],o="png"===e.name.split(".")[1],r=e.size/1024<1024;if(!a&&!o)return this.$message("上传图片只能是jpg或png"),!1;if(!r)return this.$message("图片大小不能超过1MB"),!1;if(a||o&&r){var l=new FormData;return l.append("aid",this.currAdmin.aid),l.append("file",e),this.$axios.post("hotel/uploadPic",l).then(function(e){e.data.success||t.$message.error(e.data.message),t.$router.go(0)}).catch(function(e){}),!0}return a||o&&r},cityChanged:function(e){this.hotelForm.city=e}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("el-container",[a("el-aside",{attrs:{width:"300px"}},[a("el-button",{on:{click:function(t){e.addHotelDialog=!0}}},[e._v(e._s(e.suffixText)+"酒店")])],1),e._v(" "),a("el-main",{staticStyle:{"background-color":"#D3DCE6"}},[a("el-card",{staticStyle:{width:"500px",float:"left","margin-right":"50px","margin-top":"15px"},attrs:{shadow:"always"}},[a("div",{staticStyle:{"font-size":"14px"}},[a("span",{staticClass:"item"},[e._v(e._s("名称："+e.hotelForm.hotelName))]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"item"},[e._v(e._s("地址："+e.hotelForm.city+","+e.hotelForm.location))]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"item"},[e._v(e._s("详情："+e.hotelForm.details))]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"item"},[e._v(e._s("评分："+e.hotelForm.grade))]),e._v(" "),a("br")])]),e._v(" "),a("el-upload",{staticStyle:{float:"left",clear:"right",margin:"10px"},attrs:{action:e.abc,"list-type":"picture-card","on-preview":e.previewPic,"on-remove":e.removePic,"before-upload":e.checkFileTypeSize}},[a("i",{staticClass:"el-icon-plus"}),e._v(" "),a("div",{staticClass:"el-upload__tip",staticStyle:{clear:"both","margin-left":"80px"},attrs:{slot:"tip"},slot:"tip"},[e._v("\n          只能上传jpg/png文件，且不超过1MB\n        ")])]),e._v(" "),a("el-dialog",{attrs:{visible:e.imgDialog},on:{"update:visible":function(t){e.imgDialog=t}}},[a("img",{attrs:{width:"100%",src:e.picUrl}})]),e._v(" "),a("el-carousel",{staticStyle:{height:"500px",clear:"both"},attrs:{trigger:"click",interval:3e3}},e._l(e.items,function(e){return a("el-carousel-item",{key:e.pid,staticStyle:{height:"500px"}},[a("img",{attrs:{src:"api/hotel/showPic?id="+e.pid}})])}),1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"酒店信息",center:"",visible:e.addHotelDialog,"before-close":e.closeDialog},on:{"update:visible":function(t){e.addHotelDialog=t}}},[a("el-form",{ref:"hotelForm",attrs:{model:e.hotelForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",required:"",prop:"hotelName"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{clearable:""},model:{value:e.hotelForm.hotelName,callback:function(t){e.$set(e.hotelForm,"hotelName",t)},expression:"hotelForm.hotelName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"省市",required:"",prop:"city"}},[a("Address",{on:{cityChanged:function(t){return e.cityChanged(t)}},model:{value:e.hotelForm.city,callback:function(t){e.$set(e.hotelForm,"city",t)},expression:"hotelForm.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地点",required:"",prop:"location"}},[a("el-input",{attrs:{clearable:"",placeholder:"例：岳麓区-麓山南路932号"},model:{value:e.hotelForm.location,callback:function(t){e.$set(e.hotelForm,"location",t)},expression:"hotelForm.location"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细描述",prop:"details"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6}},model:{value:e.hotelForm.details,callback:function(t){e.$set(e.hotelForm,"details",t)},expression:"hotelForm.details"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addHotel}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e.closeDialog}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var H=a("VU/8")(L,B,!1,function(e){a("cAU4")},"data-v-76dfacdb",null).exports,V={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-col",{staticClass:"grid-content"},[t("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","default-active":this.$route.path,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:this.handleSelect}},[t("el-menu-item",{attrs:{index:"/admin/setting/info"}},[t("i",{staticClass:"el-icon-info"}),this._v(" "),t("span",[this._v("个人信息")])]),this._v(" "),t("el-menu-item",{attrs:{index:"/admin/setting/frontUser"}},[t("i",{staticClass:"el-icon-question"}),this._v(" "),t("span",{attrs:{slot:"title"},slot:"title"},[this._v("前台员工管理")])])],1)],1)],1)},staticRenderFns:[]};var M={components:{SettingMenu:a("VU/8")({methods:{handleSelect:function(e,t){}}},V,!1,function(e){a("27UI")},"data-v-0fc309a0",null).exports},data:function(){return{}}},J={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"block"},[t("el-container",{staticStyle:{height:"500px"}},[t("el-aside",[t("setting-menu")],1),this._v(" "),t("el-main",[t("router-view")],1)],1)],1)},staticRenderFns:[]};var q=a("VU/8")(M,J,!1,function(e){a("JOP+")},"data-v-2403ccd2",null).exports,j={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"headline"},[this._t("default"),this._v(" "),t("hr",{staticStyle:{border:"none","border-top":"3px solid #F1B709",width:"100px",margin:"0px"}}),this._v(" "),t("br")],2)},staticRenderFns:[]};var W=a("VU/8")({name:"Headline"},j,!1,function(e){a("1CgI")},"data-v-139ddc88",null).exports,Z={name:"FrontUserManage",components:{Headline:W},data:function(){var e=this;return{addUserDialog:!1,modifyUser:!1,userForm:{userName:"",idCard:"",password:"",checkPwd:"",realName:""},userFormRules:{userName:[{validator:k.validateUserName,trigger:"blur"}],idCard:[{validator:k.validateIdCard,trigger:"blur"}],password:[{validator:function(t,a,o){""===a?o(new Error("密码不能为空")):/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[a-zA-Z\d]{6,12}$/.test(a)?(""!==e.userForm.checkPwd&&e.$refs.userForm.validateField("checkPwd"),o()):o(new Error("密码应包含至少一个大写字母、小写字母和数字，且长度为6-12个字符"))},trigger:"blur"}],checkPwd:[{validator:function(t,a,o){""===a?o(new Error("请再次输入密码")):a!==e.userForm.password?o(new Error("两次输入密码不一致")):o()},trigger:"blur"}],realName:[{validator:k.validateName,trigger:"blur"}]},frontStaffTable:[],loading:!1}},mounted:function(){this.initializeAdmin()},methods:{initializeAdmin:function(){var e=this;this.loading=!0,this.currAdmin=JSON.parse(localStorage.getItem("currAdmin")),this.$axios.post("user/getFrontUsersByAid",this.currAdmin.aid).then(function(t){t.data.success||e.$message.error(t.data.message),null!=t.data.data&&(e.frontStaffTable=t.data.data),e.loading=!1}).catch(function(t){e.$message.error(t)})},showAddFrontUserDialog:function(){this.addUserDialog=!0,this.modifyUser=!1},closeDialog:function(){this.addUserDialog=!1,this.userForm={},this.$refs.userForm.resetFields()},addUser:function(){var e=this;this.$refs.userForm.validate(function(t){if(!t)return!1;e.loading=!0;var a="",o="";e.modifyUser?a="user/modifyFrontStaff":(a="user/addFrontStaff",o=p()(e.userForm.password)),e.$axios.post(a,{aid:e.currAdmin.aid,userName:e.userForm.userName,idCard:e.userForm.idCard,password:o,realName:e.userForm.realName}).then(function(t){t.data.data?(e.$message.success("操作成功！"),e.$router.go(0)):e.$message.error(t.data.message)}).catch(function(t){e.$message.error("操作失败，请重试！")}),e.loading=!1})},modifyFrontStaffInfo:function(e,t){this.addUserDialog=!0,this.modifyUser=!0;var a={userName:t.userName,idCard:t.idCard,realName:t.realName};this.userForm=a},deleteFrontStaff:function(e,t){var a=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.loading=!0,a.$axios.post("user/deleteFrontUser",t.userName).then(function(e){e.data.data?a.$router.go(0):a.$message.error("删除失败，请重试。")}).catch(function(e){}),a.loading=!1}).catch(function(){})},resetFrontStaffPwd:function(e,t){var a=this;this.loading=!0;var o=p()("000000");this.$axios.post("user/resetFrontUserPwd",{aid:t.userName,newPwd:o}).then(function(e){e.data.data?(a.$message.success("操作成功！"),a.$router.go(0)):a.$message.error("重置失败，请重试。")}).catch(function(e){}),this.loading=!1}}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("el-card",{attrs:{shadow:"always"}},[a("Headline",[e._v("前台员工")]),e._v(" "),a("div",{staticStyle:{float:"right"}},[a("el-button",{attrs:{icon:"el-icon-plus",type:"text"},on:{click:e.showAddFrontUserDialog}},[e._v("添加前台员工")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.frontStaffTable,border:""}},[a("el-table-column",{attrs:{label:"用户名",width:"200px",align:"center",prop:"userName"}}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",width:"100px",align:"center",prop:"realName"}}),e._v(" "),a("el-table-column",{attrs:{label:"身份证号",width:"163px",align:"center",prop:"idCard"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.resetFrontStaffPwd(t.$index,t.row)}}},[e._v("重置密码\n          ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.modifyFrontStaffInfo(t.$index,t.row)}}},[e._v("修改\n          ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.deleteFrontStaff(t.$index,t.row)}}},[e._v("删除\n          ")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增前台",center:"",visible:e.addUserDialog,"before-close":e.closeDialog},on:{"update:visible":function(t){e.addUserDialog=t}}},[a("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.userFormRules,"label-width":"100px"}},[e.modifyUser?a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{disabled:""},model:{value:e.userForm.userName,callback:function(t){e.$set(e.userForm,"userName",t)},expression:"userForm.userName"}})],1):a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.userForm.userName,callback:function(t){e.$set(e.userForm,"userName",t)},expression:"userForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"真实姓名",prop:"realName"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入姓名",clearable:""},model:{value:e.userForm.realName,callback:function(t){e.$set(e.userForm,"realName",t)},expression:"userForm.realName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号码",prop:"idCard"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入身份证号",clearable:""},model:{value:e.userForm.idCard,callback:function(t){e.$set(e.userForm,"idCard",t)},expression:"userForm.idCard"}})],1),e._v(" "),e.modifyUser?e._e():a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{type:"password",placeholder:"请输入密码",clearable:""},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1),e._v(" "),e.modifyUser?e._e():a("el-form-item",{attrs:{label:"确认密码",prop:"checkPwd"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{type:"password",placeholder:"请再次输入密码",clearable:""},model:{value:e.userForm.checkPwd,callback:function(t){e.$set(e.userForm,"checkPwd",t)},expression:"userForm.checkPwd"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e.closeDialog}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var Y=a("VU/8")(Z,X,!1,function(e){a("MMI3")},"data-v-04283edd",null).exports,G={name:"daysReport",components:{Headline:W},data:function(){return{expendReport:[],incomeReport:[],date:"",tableLoading:!1,pickerOptions:{disabledDate:function(e){},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近一年",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-31536e6),e.$emit("pick",[a,t])}}]}}},mounted:function(){},computed:{total:function(){var e=0,t=0;return this.expendReport.forEach(function(t){e+=t.money}),this.incomeReport.forEach(function(e){t+=e.money}),t-e}},methods:{initializeReport:function(){var e=this;this.tableLoading=!0,this.currAdmin=JSON.parse(localStorage.getItem("currAdmin")),this.$axios.post("hotel/getReport",{aid:this.currAdmin.aid,startDate:this.date[0],endDate:this.date[1]}).then(function(t){t.data.success?null!=t.data.data&&(e.expendReport=t.data.data.expendReport,e.incomeReport=t.data.data.incomeReport):e.$message.error(t.data.message)}).catch(function(t){e.$message.error(t)}),setTimeout(function(){e.tableLoading=!1},2e3)},displaySelectedReport:function(){this.initializeReport()},exportTable:function(){var e=this;new Promise(function(e){e()}).then(function(){var t=a("AL/Z").export_json_to_excel,o=[];o.push({serialNum:"支出",name:"",money:""});var r=o.concat(e.expendReport);r.push({serialNum:"收入",name:"",money:""});var l=r.concat(e.incomeReport);t(["序号","名称","金额"],e.formatJson(["serialNum","name","money"],l),e.date+"收支表")}.bind(null,a)).catch(a.oe)},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})}}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("el-container",[a("el-main",[a("el-card",{attrs:{shadow:"always"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px"}},[e._v("\n          时间选择\n          "),a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":"","picker-options":e.pickerOptions,"default-time":["00:00:00","23:59:59"]},on:{change:e.displaySelectedReport},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.exportTable}},[e._v("导出表格")])],1)]),e._v(" "),a("br"),e._v(" "),a("el-card",{attrs:{shadow:"always"}},[a("Headline",[e._v("支出")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.expendReport,border:"","show-summary":""}},[a("el-table-column",{attrs:{label:"序号",prop:"serialNum",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"账目名称",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"金额",prop:"money",sortable:""}})],1)],1),e._v(" "),a("br"),e._v(" "),a("el-card",{attrs:{shadow:"always"}},[a("Headline",[e._v("收入")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.incomeReport,border:"","show-summary":""}},[a("el-table-column",{attrs:{label:"序号",prop:"serialNum",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"账目名称",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"金额",prop:"money",sortable:""}})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[e._v(e._s("总利润："+e.total+"元"))])],1)],1)],1)],1)},staticRenderFns:[]};var Q=a("VU/8")(G,K,!1,function(e){a("QX+9")},"data-v-7da59526",null).exports,ee={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"block"},[t("router-view")],1)},staticRenderFns:[]};var te=a("VU/8")({name:"ReportManage"},ee,!1,function(e){a("rn7Y")},"data-v-a076f8d0",null).exports,ae={name:"ReportSet",components:{Headline:W},data:function(){return{reportLoading:!1,staffForm:{sid:"",work:"",count:"",salary:""},staffFormRules:{work:[{required:!0,message:"该项不能为空",trigger:"blur"}],salary:[{validator:k.validatePrice,trigger:"blur"}]},staffTable:[],roomTypeTable:[],showAddStaffDialog:!1,roomCostTable:[],showCostDialog:!1,otherForm:{desc:"",cost:"",date:"",out:""},otherFormRules:{desc:[{required:!0,message:"该项不能为空"}],cost:[{validator:k.validatePrice}]},hid:"",modifyStaff:!1,modifyRoomType:!1,modifyOtherCost:!1,showRoomTypeDialog:!1,roomTypeForm:{rtid:"",roomType:"",bedCount:""},roomTypeFormRules:{roomType:[{required:!0,message:"该项不能为空"}],bedCount:[{validator:k.validatePrice}]}}},mounted:function(){this.initializeReportSet()},methods:{initializeReportSet:function(){var e=this;this.reportLoading=!0,this.otherForm.date=new Date,this.currAdmin=JSON.parse(localStorage.getItem("currAdmin")),this.$axios.post("hotel/getReportSetByAid",this.currAdmin.aid).then(function(t){t.data.success?(null!=t.data.data&&(e.hid=t.data.data.hid,e.staffTable=t.data.data.staffDtos,e.roomTypeTable=t.data.data.roomTypeDtos,e.roomCostTable=t.data.data.otherCostDtos),e.reportLoading=!1):e.$message.error(t.data.message)}).catch(function(t){e.$message.error(t)})},addStaff:function(){var e=this;this.$refs.staffForm.validate(function(t){if(!t)return!1;var a=e.modifyStaff?"staff/modify":"staff/add";e.$axios.post(a,{hid:e.hid,sid:e.staffForm.sid,work:e.staffForm.work,count:e.staffForm.count,salary:e.staffForm.salary}).then(function(t){t.data.data?(e.staffForm={},e.$router.go(0)):e.$message.error("操作错误，请重新尝试")}).catch(function(t){e.$message.error(t)}),e.$message("添加"),e.closeDialog("addStaff")})},addRoomType:function(){var e=this;this.$refs.roomTypeForm.validate(function(t){if(!t)return!1;var a=e.modifyRoomType?"roomType/modify":"roomType/add";e.$axios.post(a,{hid:e.hid,rtid:e.roomTypeForm.rtid,roomType:e.roomTypeForm.roomType,bedCount:e.roomTypeForm.bedCount}).then(function(t){t.data.data?e.$router.go(0):e.$message.error("操作错误，请重新尝试")}).catch(function(t){e.$message.error(t)}),e.$message("添加"),e.closeDialog("type")})},modifyRoomTypeInfo:function(e,t){this.showRoomTypeDialog=!0,this.modifyRoomType=!0;var a={rtid:t.rtid,roomType:t.roomType,bedCount:t.bedCount};this.roomTypeForm=a},modifyStaffInfo:function(e,t){this.showAddStaffDialog=!0,this.modifyStaff=!0;var a={sid:t.sid,work:t.work,count:t.count,salary:t.salary};this.staffForm=a},openDialog:function(e){"cost"===e?(this.showCostDialog=!0,this.modifyOtherCost=!1):"addStaff"===e?(this.showAddStaffDialog=!0,this.modifyStaff=!1):"type"===e&&(this.showRoomTypeDialog=!0,this.modifyRoomType=!1)},closeDialog:function(e){"cost"===e?(this.showCostDialog=!1,this.otherForm={},this.$refs.otherForm.resetFields()):"addStaff"===e?(this.showAddStaffDialog=!1,this.staffForm={},this.$refs.staffForm.resetFields()):"type"===e&&(this.showRoomTypeDialog=!1,this.roomTypeForm={},this.$refs.roomTypeForm.resetFields())},addCostItem:function(){var e=this;this.$refs.otherForm.validate(function(t){if(!t)return e.$message("错误"),!1;var a=e.modifyOtherCost?"otherCost/modify":"otherCost/add";e.$axios.post(a,{hid:e.hid,ocid:e.otherForm.ocid,desc:e.otherForm.desc,date:e.otherForm.date,cost:e.otherForm.cost,out:e.otherForm.out}).then(function(t){t.data.data?e.$router.go(0):e.$message.error("操作错误，请重新尝试")}).catch(function(t){e.$message.error(t)}),e.closeDialog("cost")})},modifyOtherInfo:function(e,t){this.showCostDialog=!0,this.modifyOtherCost=!0;var a={desc:t.desc,cost:t.cost,date:t.date,out:t.out};this.otherForm=a},deleteStaff:function(e,t){var a=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.post("staff/delete",t.sid).then(function(e){e.data.data?a.$router.go(0):a.$message.error("删除失败，请重试。")}).catch(function(e){})}).catch(function(){})},deleteRoomType:function(e,t){var a=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.post("roomType/delete",t.rtid).then(function(e){e.data.data?a.$router.go(0):a.$message.error("删除失败，请重试。")}).catch(function(e){})}).catch(function(){})},deleteTableItem:function(e,t){var a=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.post("otherCost/delete",t.ocid).then(function(e){e.data.data?a.$router.go(0):a.$message.error("删除失败，请重试。")}).catch(function(e){})}).catch(function(){})}}},oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("el-container",[a("el-main",[a("el-card",{attrs:{shadow:"always"}},[a("Headline",[e._v("房间类型")]),e._v(" "),a("div",{staticStyle:{float:"right"}},[a("el-button",{attrs:{icon:"el-icon-plus",type:"text"},on:{click:function(t){return e.openDialog("type")}}},[e._v("添加")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.reportLoading,expression:"reportLoading"}],attrs:{data:e.roomTypeTable,border:""}},[a("el-table-column",{attrs:{label:"序号",width:"150px",align:"center",prop:"serialNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"房间类型",width:"400px",align:"center",prop:"roomType"}}),e._v(" "),a("el-table-column",{attrs:{label:"床位数",width:"150px",align:"center",prop:"bedCount"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.modifyRoomTypeInfo(t.$index,t.row)}}},[e._v("修改\n              ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.deleteRoomType(t.$index,t.row)}}},[e._v("删除\n              ")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增项",visible:e.showRoomTypeDialog,center:""},on:{"update:visible":function(t){e.showRoomTypeDialog=t},close:function(t){return e.closeDialog("type")}}},[a("el-form",{ref:"roomTypeForm",attrs:{model:e.roomTypeForm,rules:e.roomTypeFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"房间类型",prop:"roomType"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{clearable:""},model:{value:e.roomTypeForm.roomType,callback:function(t){e.$set(e.roomTypeForm,"roomType",t)},expression:"roomTypeForm.roomType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"床位数",prop:"bedCount"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{clearable:""},model:{value:e.roomTypeForm.bedCount,callback:function(t){e.$set(e.roomTypeForm,"bedCount",e._n(t))},expression:"roomTypeForm.bedCount"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addRoomType}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(t){return e.closeDialog("type")}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("br"),e._v(" "),a("el-card",{attrs:{shadow:"always"}},[a("Headline",[e._v("房间成本")]),e._v(" "),a("div",{staticStyle:{float:"right"}},[a("el-button",{attrs:{icon:"el-icon-plus",type:"text"},on:{click:function(t){return e.openDialog("cost")}}},[e._v("其他")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.reportLoading,expression:"reportLoading"}],attrs:{data:e.roomCostTable,border:""}},[a("el-table-column",{attrs:{label:"序号",width:"150px",align:"center",prop:"serialNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"描述",width:"400px",align:"center",prop:"desc"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型",width:"150px",align:"center",prop:"out"}}),e._v(" "),a("el-table-column",{attrs:{label:"金额",width:"150px",align:"center",prop:"cost"}}),e._v(" "),a("el-table-column",{attrs:{label:"时间",sortable:"",width:"150px",align:"center",prop:"date"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.date))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.modifyOtherInfo(t.$index,t.row)}}},[e._v("修改\n              ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.deleteTableItem(t.$index,t.row)}}},[e._v("删除\n              ")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增项",visible:e.showCostDialog,center:""},on:{"update:visible":function(t){e.showCostDialog=t},close:function(t){return e.closeDialog("cost")}}},[a("el-form",{ref:"otherForm",attrs:{model:e.otherForm,rules:e.otherFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"描述",prop:"desc"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{clearable:""},model:{value:e.otherForm.desc,callback:function(t){e.$set(e.otherForm,"desc",t)},expression:"otherForm.desc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"out"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.otherForm.out,callback:function(t){e.$set(e.otherForm,"out",t)},expression:"otherForm.out"}},[a("el-option",{attrs:{label:"收入",value:"收入"}}),e._v(" "),a("el-option",{attrs:{label:"支出",value:"支出"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"费用",prop:"cost"}},[a("el-input",{staticStyle:{width:"275px"},attrs:{clearable:""},model:{value:e.otherForm.cost,callback:function(t){e.$set(e.otherForm,"cost",e._n(t))},expression:"otherForm.cost"}},[a("template",{slot:"append"},[e._v("元")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"日期",prop:"date"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.otherForm.date,callback:function(t){e.$set(e.otherForm,"date",t)},expression:"otherForm.date"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addCostItem}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(t){return e.closeDialog("cost")}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("br"),e._v(" "),a("el-card",{attrs:{shadow:"always"}},[a("Headline",[e._v("员工")]),e._v(" "),a("div",{staticStyle:{float:"right"}},[a("el-button",{attrs:{icon:"el-icon-plus",type:"text"},on:{click:function(t){return e.openDialog("addStaff")}}},[e._v("添加员工")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.reportLoading,expression:"reportLoading"}],attrs:{data:e.staffTable,border:""}},[a("el-table-column",{attrs:{label:"序号",width:"150px",align:"center",prop:"serialNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"职业",width:"200px",align:"center",prop:"work"}}),e._v(" "),a("el-table-column",{attrs:{label:"人数",width:"150px",align:"center",prop:"count"}}),e._v(" "),a("el-table-column",{attrs:{label:"工资(元/每人每月)",sortable:"",width:"200px",align:"center",prop:"salary"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.modifyStaffInfo(t.$index,t.row)}}},[e._v("修改\n              ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.deleteStaff(t.$index,t.row)}}},[e._v("删除\n              ")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加员工",visible:e.showAddStaffDialog,center:""},on:{"update:visible":function(t){e.showAddStaffDialog=t},close:function(t){return e.closeDialog("addStaff")}}},[a("el-form",{ref:"staffForm",attrs:{model:e.staffForm,rules:e.staffFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"职业",prop:"work"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{clearable:""},model:{value:e.staffForm.work,callback:function(t){e.$set(e.staffForm,"work",t)},expression:"staffForm.work"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"人数",prop:"count"}},[a("el-input-number",{attrs:{min:1},model:{value:e.staffForm.count,callback:function(t){e.$set(e.staffForm,"count",t)},expression:"staffForm.count"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"工资",prop:"salary"}},[a("el-input",{staticStyle:{width:"275px"},attrs:{clearable:""},model:{value:e.staffForm.salary,callback:function(t){e.$set(e.staffForm,"salary",e._n(t))},expression:"staffForm.salary"}},[a("template",{slot:"append"},[e._v("元")])],2)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addStaff}},[e._v("确认")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(t){return e.closeDialog("addStaff")}}},[e._v("取消")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var re=a("VU/8")(ae,oe,!1,function(e){a("e5qD")},"data-v-e637078c",null).exports,le={name:"Information",data:function(){return{currAdmin:{},currAdminRules:{aid:[{validator:k.validateUserName,trigger:"blur"}],realName:[{validator:k.validateName,trigger:"blur"}],idCard:[{validator:k.validateIdCard,trigger:"blur"}],emailAddress:[{validator:k.validateEmail,trigger:"blur"}]},loading:!1}},mounted:function(){this.initializeAdmin()},methods:{initializeAdmin:function(){var e=this;this.currAdmin=JSON.parse(localStorage.getItem("currAdmin")),this.$axios.post("user/getAdminByAid",this.currAdmin.aid).then(function(t){t.data.success||e.$message.error(t.data.message),e.currAdmin=t.data.data}).catch(function(t){e.$message.error(t)})},modifyAdmin:function(){var e=this;this.$refs.currAdmin.validate(function(t){t&&(e.loading=!0,e.$axios.post("user/modifyAdmin",{id:e.currAdmin.id,aid:e.currAdmin.aid,realName:e.currAdmin.realName,idCard:e.currAdmin.idCard,emailAddress:e.currAdmin.emailAddress,emailPwd:e.currAdmin.emailPwd}).then(function(t){setTimeout(function(){e.loading=!1},2e3),t.data.data?(e.$message.success("修改成功"),e.$router.go(0)):e.$message.error(t.data.message)}).catch(function(t){e.$message.error(t)}))})}}},ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{shadow:"always"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"larger"}},[e._v("个人信息")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.modifyAdmin}},[e._v("修改")])],1),e._v(" "),a("div",[a("el-form",{ref:"currAdmin",staticStyle:{width:"300px",margin:"auto"},attrs:{model:e.currAdmin,rules:e.currAdminRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"aid"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.currAdmin.aid,callback:function(t){e.$set(e.currAdmin,"aid",t)},expression:"currAdmin.aid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"真实姓名",prop:"realName"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.currAdmin.realName,callback:function(t){e.$set(e.currAdmin,"realName",t)},expression:"currAdmin.realName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.currAdmin.idCard,callback:function(t){e.$set(e.currAdmin,"idCard",t)},expression:"currAdmin.idCard"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱地址",prop:"emailAddress"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.currAdmin.emailAddress,callback:function(t){e.$set(e.currAdmin,"emailAddress",t)},expression:"currAdmin.emailAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱授权码",prop:"emailAddress"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{type:"password"},model:{value:e.currAdmin.emailPwd,callback:function(t){e.$set(e.currAdmin,"emailPwd",t)},expression:"currAdmin.emailPwd"}})],1)],1)],1)])],1)},staticRenderFns:[]};var ie=a("VU/8")(le,ne,!1,function(e){a("ZlbB")},"data-v-7924745b",null).exports,se=a("BO1k"),ce=a.n(se),ue={name:"RoomDialog",props:["showDialog","room","roomTypes"],data:function(){return{configs:k.configOptions,checkAll:!1,isIndeterminate:!0,types:this.roomTypes}},watch:{roomTypes:function(e){this.updateRoomTypes(e)}},methods:{updateRoomTypes:function(e){this.types=e},closeDialog:function(){this.$emit("closeDialog")},handleCheckAllChange:function(e){this.room.configuration=e?k.configOptions:[],this.isIndeterminate=!1},handleCheckedChange:function(e){var t=e.length;this.checkAll=t===this.configs.length,this.isIndeterminate=t>0&&t<this.configs.length},modifyRoom:function(){var e=this;this.$axios.post("room/modifyRoom",this.room).then(function(t){t.data.success&&t.data.data?(e.$message.success("修改成功"),e.closeDialog(),e.$router.go(0)):e.$message.error(t.data.message)}).catch(function(t){e.$message.error(t)})}}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"房间详情",visible:e.showDialog,"before-close":e.closeDialog,center:""},on:{"update:visible":function(t){e.showDialog=t}}},[a("el-form",{staticStyle:{padding:"0"},attrs:{model:e.room,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"房间号"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.room.roomNumber,callback:function(t){e.$set(e.room,"roomNumber",t)},expression:"room.roomNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{model:{value:e.room.type,callback:function(t){e.$set(e.room,"type",t)},expression:"room.type"}},e._l(e.types,function(t){return a("el-option",{key:t.roomType,attrs:{label:t.roomType,value:t.roomType}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.roomType))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s("床位数"+t.bedCount))])])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{model:{value:e.room.status,callback:function(t){e.$set(e.room,"status",t)},expression:"room.status"}},[e.room.order.realName?e._e():a("el-option",{attrs:{label:"空房干净",value:"EC"}}),e._v(" "),e.room.order.realName?e._e():a("el-option",{attrs:{label:"空房待打扫",value:"ED"}}),e._v(" "),e.room.order.realName?a("el-option",{attrs:{label:"有人已打扫",value:"C"}}):e._e(),e._v(" "),e.room.order.realName?a("el-option",{attrs:{label:"有人待打扫",value:"D"}}):e._e()],1)],1),e._v(" "),e.room.order.realName?a("el-form-item",{attrs:{label:"住客信息"}},[a("el-collapse",[a("el-collapse-item",{staticStyle:{"font-size":"14px"},attrs:{title:e.room.order.realName}},[a("div",[a("div",[e._v("身份证号："+e._s(e.room.order.idCard))]),e._v(" "),a("div",[e._v("邮箱地址："+e._s(e.room.order.emailAddress))]),e._v(" "),a("div",[a("span",[e._v("时间区间 ")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange",readonly:""},model:{value:e.room.order.date,callback:function(t){e.$set(e.room.order,"date",t)},expression:"room.order.date"}})],1)])])],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"价格"}},[a("el-input",{staticStyle:{width:"295px"},model:{value:e.room.price,callback:function(t){e.$set(e.room,"price",t)},expression:"room.price"}},[a("template",{slot:"append"},[e._v("元/晚")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"房间配置"}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选\n      ")]),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.room.configuration,callback:function(t){e.$set(e.room,"configuration",t)},expression:"room.configuration"}},e._l(e.configs,function(e){return a("el-checkbox",{key:e,attrs:{label:e}})}),1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.modifyRoom}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e.closeDialog}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var me={name:"RoomManageInfo",components:{RoomDialog:a("VU/8")(ue,de,!1,function(e){a("GOjW")},"data-v-8df006e2",null).exports},props:{rooms:{type:Array,default:[]},roomTypes:{type:Array,default:[]}},data:function(){return{currentPage:1,pageSize:9,total:0,currRooms:this.rooms,showDialog:!1,roomIndex:0,needModifyRoom:{},currRoomTypes:this.roomTypes}},watch:{rooms:function(e){this.updateValue(e)},roomTypes:function(e){this.updateRoomTypes(e)}},methods:{updateValue:function(e){this.currRooms=e,this.total=this.currRooms.length},updateRoomTypes:function(e){this.currRoomTypes=e},modifyRoomInfo:function(e){var t=!0,a=!1,o=void 0;try{for(var r,l=ce()(this.currRooms);!(t=(r=l.next()).done);t=!0){var n=r.value;if(n.rid===e){this.needModifyRoom=n;break}}}catch(e){a=!0,o=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw o}}this.showDialog=!0},closeDialog:function(){this.showDialog=!1},cardClass:function(e){return"空房干净"===e.status?"EC":"空房待打扫"===e.status?"ED":"住人已打扫"===e.status?"C":"D"},deleteRoom:function(e){var t=this;this.$confirm("此操作将删除房间"+e.roomNumber+"，是否继续","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post("room/deleteRoom",e.rid).then(function(e){e.data.success&&e.data.data?(t.$message.success("删除成功"),t.$router.go(0)):t.$message.error(e.data.message)}).catch(function(e){t.$message.error(e)})}).catch(function(){})},changePage:function(e){this.currentPage=e}}},ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-row",{staticStyle:{height:"480px"}},e._l(e.currRooms.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),function(t){return a("el-col",{key:t.rid,staticClass:"card",attrs:{span:8}},[a("el-card",{class:e.cardClass(t),attrs:{shadow:"hover"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"cardTitle"},[e._v(e._s(t.roomNumber+t.type))]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"0 0 15px 0",color:"black"},attrs:{size:"medium",icon:"el-icon-error",type:"text"},on:{click:function(a){return e.deleteRoom(t)}}})],1),e._v(" "),a("div",[a("el-row",[a("el-col",{attrs:{span:10}},[e._v(e._s("状态: "+t.status))]),e._v(" "),a("el-col",{attrs:{span:10}},[e._v(" "+e._s("价格: "+t.price+"元/日"))])],1),e._v(" "),a("el-row"),e._v(" "),a("el-row",[a("el-button",{staticStyle:{float:"right"},attrs:{type:"warning",plain:""},on:{click:function(a){return e.modifyRoomInfo(t.rid)}}},[e._v("详情")])],1)],1)])],1)}),1),e._v(" "),a("el-pagination",{attrs:{layout:"prev,pager,next,total","page-size":e.pageSize,total:e.total,background:""},on:{"current-change":e.changePage}})],1),e._v(" "),a("div",[a("room-dialog",{attrs:{showDialog:e.showDialog,room:e.needModifyRoom,roomTypes:e.currRoomTypes},on:{closeDialog:e.closeDialog}})],1)])},staticRenderFns:[]};var pe={name:"RoomManage",components:{RoomManageInfo:a("VU/8")(me,ve,!1,function(e){a("RY6c")},"data-v-b7d22f42",null).exports},data:function(){return{roomCount:{},spanNum:9,showAddDialog:!1,newRoom:{floorNum:"",status:"",type:"",price:0,configuration:["wifi","空调"],count:1},roomTypes:[],newRoomRules:{floorNum:[{validator:k.validatePrice,trigger:"blur"}],type:[{required:!0,message:"请选择房间类型",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}],price:[{validator:k.validatePrice,trigger:"blur"}]},configs:k.configOptions,checkAll:!1,isIndeterminate:!0,multipleAdd:!1,currAdmin:{},showTab:!1,rooms:[]}},mounted:function(){this.initializeRooms()},methods:{addRoom:function(){var e=this;this.$refs.newRoom.validate(function(t){if(!t)return e.$message("错误"),!1;e.multipleAdd?e.$axios.post("room/addRoomBatch",{aid:e.currAdmin.aid,floorNum:e.newRoom.floorNum,status:e.newRoom.status,type:e.newRoom.type,price:e.newRoom.price,configuration:e.newRoom.configuration,count:e.newRoom.count}).then(function(t){t.data.success?(localStorage.setItem("currAdmin",s()(t.data.data)),e.resetForm(),e.$router.go(0)):e.$message.error(t.data.message)}).catch(function(t){e.$message.error(t)}):(e.$message("添加"),e.$axios.post("room/addRoom",{aid:e.currAdmin.aid,floorNum:e.newRoom.floorNum,status:e.newRoom.status,type:e.newRoom.type,price:e.newRoom.price,configuration:e.newRoom.configuration,count:e.newRoom.count}).then(function(t){t.data.success?(localStorage.setItem("currAdmin",s()(t.data.data)),e.resetForm(),e.$router.go(0)):e.$message.error(t.data.message)}).catch(function(t){e.$message.error(t)})),e.multipleAdd=!1})},multipleAddRooms:function(){this.showAddDialog=!0,this.multipleAdd=!0},resetForm:function(){this.$refs.newRoom.resetFields(),this.showAddDialog=!1,this.multipleAdd=!1},handleCheckAllChange:function(e){this.newRoom.configuration=e?k.configOptions:[],this.isIndeterminate=!1},handleCheckedChange:function(e){var t=e.length;this.checkAll=t===this.configs.length,this.isIndeterminate=t>0&&t<this.configs.length},initializeRooms:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"});this.currAdmin=JSON.parse(localStorage.getItem("currAdmin")),this.currAdmin.haveHotel?(this.showTab=!0,this.$axios.post("room/getAllRooms",this.currAdmin.aid).then(function(t){e.roomCount=t.data.data.roomCount,e.rooms=t.data.data.roomDtoList,0===t.data.data.roomTypeDtos.length?e.roomTypes=k.roomTypes:e.roomTypes=t.data.data.roomTypeDtos}).catch(function(e){})):this.showTab=!1,setTimeout(function(){t.close()},2e3)}}},fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[e.showTab?a("el-container",[a("el-aside",[a("el-row",[a("label",{staticStyle:{float:"left",color:"#fff","font-size":"18px"}},[e._v("房态")])]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:e.spanNum}},[a("el-badge",{attrs:{value:e.roomCount.total}},[a("el-tag",{staticStyle:{color:"#fff"}},[e._v("全部")])],1)],1),e._v(" "),a("el-col",{attrs:{span:e.spanNum}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:e.spanNum}},[a("el-badge",{attrs:{value:e.roomCount.emptyDirty}},[a("el-tag",{attrs:{type:"danger"}},[e._v("空脏")])],1)],1),e._v(" "),a("el-col",{attrs:{span:e.spanNum}},[a("el-badge",{attrs:{value:e.roomCount.emptyClean}},[a("el-tag",{attrs:{type:"success"}},[e._v("空净")])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:e.spanNum}},[a("el-badge",{attrs:{value:e.roomCount.dirty}},[a("el-tag",{attrs:{type:"info"}},[e._v("住脏")])],1)],1),e._v(" "),a("el-col",{attrs:{span:e.spanNum}},[a("el-badge",{attrs:{value:e.roomCount.clean}},[a("el-tag",{attrs:{type:"warning"}},[e._v("住净")])],1)],1)],1),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("el-row",[a("el-button",{attrs:{icon:"el-icon-circle-plus",type:"primary"},on:{click:function(t){e.showAddDialog=!0}}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-circle-plus",type:"primary"},on:{click:e.multipleAddRooms}},[e._v("批量添加")])],1)],1),e._v(" "),a("el-main",[a("room-manage-info",{attrs:{rooms:e.rooms,roomTypes:e.roomTypes}})],1)],1):a("el-container",[a("h1",[e._v("请先添加酒店。")])]),e._v(" "),a("el-dialog",{attrs:{title:"添加房间",visible:e.showAddDialog,"before-close":e.resetForm,center:""},on:{"update:visible":function(t){e.showAddDialog=t}}},[a("el-form",{ref:"newRoom",attrs:{model:e.newRoom,"label-width":"100px",rules:e.newRoomRules}},[a("el-form-item",{attrs:{label:"楼层",prop:"floorNum"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{clearable:""},model:{value:e.newRoom.floorNum,callback:function(t){e.$set(e.newRoom,"floorNum",e._n(t))},expression:"newRoom.floorNum"}})],1),e._v(" "),e.multipleAdd?a("el-form-item",{attrs:{label:"房间数量",prop:"count"}},[a("el-input-number",{attrs:{min:1},model:{value:e.newRoom.count,callback:function(t){e.$set(e.newRoom,"count",t)},expression:"newRoom.count"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{model:{value:e.newRoom.type,callback:function(t){e.$set(e.newRoom,"type",t)},expression:"newRoom.type"}},e._l(e.roomTypes,function(t){return a("el-option",{key:t.roomType,attrs:{label:t.roomType,value:t.roomType}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.roomType))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s("床位数"+t.bedCount))])])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{model:{value:e.newRoom.status,callback:function(t){e.$set(e.newRoom,"status",t)},expression:"newRoom.status"}},[a("el-option",{attrs:{label:"空房干净",value:"EC"}}),e._v(" "),a("el-option",{attrs:{label:"空房待打扫",value:"ED"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"价格",prop:"price"}},[a("el-input",{staticStyle:{width:"295px"},attrs:{clearable:""},model:{value:e.newRoom.price,callback:function(t){e.$set(e.newRoom,"price",e._n(t))},expression:"newRoom.price"}},[a("template",{slot:"append"},[e._v("元/晚")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"房间配置",prop:"configuration"}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选\n        ")]),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.newRoom.configuration,callback:function(t){e.$set(e.newRoom,"configuration",t)},expression:"newRoom.configuration"}},e._l(e.configs,function(e){return a("el-checkbox",{key:e,attrs:{label:e}})}),1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addRoom}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e.resetForm}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var he=a("VU/8")(pe,fe,!1,function(e){a("r2ji")},"data-v-50dfb4be",null).exports,xe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"block"},[t("router-view")],1)},staticRenderFns:[]};var ge=a("VU/8")({name:"Room"},xe,!1,function(e){a("wTaG")},"data-v-cf5e3458",null).exports,be={name:"RoomSelectCriteria",components:{Headline:W},props:{selectLoading:{type:Boolean,default:!1},types:{type:Array,default:[]}},data:function(){var e=this;return{roomTypes:this.types,roomStatus:k.roomStatus,roomSelectForm:{roomNumber:"",type:"",status:"",minPrice:0,maxPrice:0},selectRoomRules:{minPrice:[{validator:function(e,t,a){b()(t)?t<0&&a(new Error("必须大于0")):a(new Error("必须为数字")),a()}}],maxPrice:[{validator:function(t,a,o){setTimeout(function(){b()(a)?(a<e.roomSelectForm.minPrice&&o(new Error("该值应大于等于最小值")),o()):o(new Error("必须为数字"))},1e3)}}]},bookForm:{type:"",order:{oid:"",realName:"",idCard:"",date:["",""],emailAddress:"",inform:!0,rate:0,frontUserName:""}},bookFormRules:{realName:[{validator:k.validateName,trigger:"blur"}],idCard:[{validator:k.validateIdCard,trigger:"blur"}],emailAddress:[{validator:k.validateEmail,trigger:"blur"}]},showBookDialog:!1,checkInPickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()}}}},watch:{types:function(e){this.updateTypes(e)}},mounted:function(){this.currFrontUser=JSON.parse(localStorage.getItem("currFrontUser"))},methods:{updateTypes:function(e){this.roomTypes=e},resetForm:function(e){this.$refs[e].resetFields()},selectRoom:function(){var e=this;this.$refs.roomSelectForm.validate(function(t){if(!t)return!1;e.$emit("changeLoading",!0),e.$axios.post("room/select",e.roomSelectForm).then(function(t){e.$emit("getSpecialRooms",t.data.data),e.$emit("changeLoading",!1)}).catch(function(t){e.$message.error(t)}),e.$message("开始查询")})},bookRoom:function(){var e=this;this.$refs.bookForm.validate(function(t){if(!t)return!1;e.bookForm.order.frontUserName=e.currFrontUser.userName,e.$axios.post("room/book",e.bookForm).then(function(t){0!==t.data.data?(e.$message.success("成功预订房间"+t.data.data+",请准时入住"),setTimeout(function(){e.$router.go(0)},2e3)):e.$message.warning("抱歉，没有空房")}).catch(function(t){e.$message.error(t)})})},closeBookDialog:function(){this.showBookDialog=!1,this.$refs.bookForm.resetFields()}}},we={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{attrs:{shadow:"always"}},[a("Headline",[e._v("房间查询")]),e._v(" "),a("div",{staticStyle:{clear:"both"}},[a("el-form",{ref:"roomSelectForm",attrs:{inline:!0,model:e.roomSelectForm,rules:e.selectRoomRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"房间号",prop:"roomNumber"}},[a("el-input",{attrs:{placeholder:"请输入准确房间号",clearable:""},model:{value:e.roomSelectForm.roomNumber,callback:function(t){e.$set(e.roomSelectForm,"roomNumber",e._n(t))},expression:"roomSelectForm.roomNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{clearable:"",multiple:""},model:{value:e.roomSelectForm.type,callback:function(t){e.$set(e.roomSelectForm,"type",t)},expression:"roomSelectForm.type"}},e._l(e.roomTypes,function(t){return a("el-option",{key:t.roomType,attrs:{label:t.roomType,value:t.roomType}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.roomType))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s("床位数"+t.bedCount))])])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{clearable:"",multiple:""},model:{value:e.roomSelectForm.status,callback:function(t){e.$set(e.roomSelectForm,"status",t)},expression:"roomSelectForm.status"}},e._l(e.roomStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{clear:"left"},attrs:{label:"价格区间"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{staticStyle:{"margin-right":"0px"},attrs:{prop:"minPrice"}},[a("el-input",{attrs:{placeholder:"最低价",clearable:""},model:{value:e.roomSelectForm.minPrice,callback:function(t){e.$set(e.roomSelectForm,"minPrice",e._n(t))},expression:"roomSelectForm.minPrice"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{staticStyle:{"margin-right":"0px"},attrs:{prop:"maxPrice"}},[a("el-input",{attrs:{placeholder:"最高价",clearable:""},model:{value:e.roomSelectForm.maxPrice,callback:function(t){e.$set(e.roomSelectForm,"maxPrice",e._n(t))},expression:"roomSelectForm.maxPrice"}})],1)],1)],1),e._v(" "),a("el-form-item",{staticStyle:{float:"right","margin-right":"100px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.selectRoom}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("roomSelectForm")}}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showBookDialog=!0}}},[e._v("预订房间")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"预订",visible:e.showBookDialog,center:"","before-close":e.closeBookDialog},on:{"update:visible":function(t){e.showBookDialog=t}}},[a("el-form",{ref:"bookForm",staticStyle:{height:"300px"},attrs:{model:e.bookForm.order,rules:e.bookFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"房间类型"}},[a("el-select",{attrs:{clearable:""},model:{value:e.bookForm.type,callback:function(t){e.$set(e.bookForm,"type",t)},expression:"bookForm.type"}},e._l(e.roomTypes,function(t){return a("el-option",{key:t.roomType,attrs:{label:t.roomType,value:t.roomType}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.roomType))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s("床位数"+t.bedCount))])])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"realName"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.bookForm.order.realName,callback:function(t){e.$set(e.bookForm.order,"realName",t)},expression:"bookForm.order.realName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.bookForm.order.idCard,callback:function(t){e.$set(e.bookForm.order,"idCard",t)},expression:"bookForm.order.idCard"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"emailAddress"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.bookForm.order.emailAddress,callback:function(t){e.$set(e.bookForm.order,"emailAddress",t)},expression:"bookForm.order.emailAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"入住时间",prop:"date"}},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["12:00:00","12:00:00"],"picker-options":e.checkInPickerOptions},model:{value:e.bookForm.order.date,callback:function(t){e.$set(e.bookForm.order,"date",t)},expression:"bookForm.order.date"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.bookRoom}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:e.closeBookDialog}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var ye=a("VU/8")(be,we,!1,function(e){a("hA51")},"data-v-0830cb21",null).exports,_e={name:"RoomSelectResult",components:{Headline:W},props:{rooms:{type:Array,default:[]},selectLoading:{type:Boolean,default:!1}},data:function(){return{currentPage:1,total:0,pageSize:5,tableLoading:this.selectLoading,tableRoomDatas:this.rooms,showCheckInDialog:!1,showCheckOutDialog:!1,checkInRoom:{rid:"",roomNumber:"",floorNum:"",type:"",status:"",price:0,order:{oid:"",realName:"",idCard:"",date:["",""],emailAddress:"",inform:"",rate:0,frontUserName:""}},checkOutRoom:{rid:"",roomNumber:"",floorNum:"",type:"",status:"",price:0,order:{oid:"",realName:"",idCard:"",date:["",""],emailAddress:"",inform:"",rate:0,frontUserName:""}},checkInRoomRules:{realName:[{validator:k.validateName,trigger:"blur"}],idCard:[{validator:k.validateIdCard,trigger:"blur"}],emailAddress:[{validator:k.validateEmail,trigger:"blur"}]},modifyOrder:!1,dates:[],checkInPickerOptions:this.pOptions(),orders:[]}},mounted:function(){this.currFrontUser=JSON.parse(localStorage.getItem("currFrontUser"))},watch:{rooms:function(e){this.total=this.rooms.length,this.updateRooms(e)},selectLoading:function(e){this.updateLoading(e)}},methods:{updateRooms:function(e){this.tableRoomDatas=e},updateLoading:function(e){this.tableLoading=e},openCheckInDialog:function(e,t){this.showCheckInDialog=!0,this.modifyOrder=!1,this.dates.length=0,this.checkInRoom=t,this.disabledBookDate()},openCheckOutDialog:function(e,t){this.showCheckOutDialog=!0,this.checkOutRoom=t},openModifyDialog:function(e,t){this.showCheckInDialog=!0,this.modifyOrder=!0,this.checkInRoom=t},checkOut:function(){var e=this;this.checkOutRoom.order.frontUserName=this.currFrontUser.userName,this.$axios.post("order/checkOut",this.checkOutRoom).then(function(t){e.$message("需退费"+t.data.data+"元"),setTimeout(function(){e.$router.go(0)},2e3)}).catch(function(t){e.$message.error(t)})},cleanRoom:function(e,t){var a=this;this.$axios.post("room/clean",t.rid).then(function(e){e.data.success?a.$router.go(0):a.$message.error(e.data.message)}).catch(function(e){a.$message.error(e)})},changePage:function(e){this.currentPage=e},closeCheckInDialog:function(){this.showCheckInDialog=!1,this.$refs.checkInRoom.resetFields()},closeCheckOutDialog:function(){this.showCheckOutDialog=!1,this.$refs.checkOutRoom.resetFields()},checkIn:function(){var e=this;this.$refs.checkInRoom.validate(function(t){if(!t)return!1;var a=e.modifyOrder?"order/modify":"order/checkIn";e.checkInRoom.order.frontUserName=e.currFrontUser.userName,e.$axios.post(a,e.checkInRoom).then(function(t){t.data.success?e.$router.go(0):e.$message.error(t.data.message)}).catch(function(t){e.$message.error(t)})})},pOptions:function(){var e=this;return{disabledDate:function(t){return e.dates.indexOf(t.getTime())>-1||t.getTime()<Date.now()-864e5}}},disabledBookDate:function(){var e=this;this.$axios.post("room/getAllOrdersDate",this.checkInRoom.rid).then(function(t){e.dates=t.data.data}).catch(function(e){})}}},ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("Headline",[e._v("查询结果")]),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableRoomDatas.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),border:"","default-sort":{prop:"roomNumber",order:"ascending"}}},[a("el-table-column",{attrs:{label:"房间号",width:"150px",align:"center",prop:"roomNumber"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型",width:"200px",align:"center",prop:"type"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"150px",align:"center",prop:"status"}}),e._v(" "),a("el-table-column",{attrs:{label:"价格",sortable:"",width:"150px",align:"center",prop:"price"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"空房干净"===t.row.status,expression:"scope.row.status==='空房干净'"}],attrs:{type:"primary",size:"small"},on:{click:function(a){return e.openCheckInDialog(t.$index,t.row)}}},[e._v("入住\n            ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"住人待打扫"===t.row.status||"住人已打扫"===t.row.status,expression:"scope.row.status==='住人待打扫' ||scope.row.status==='住人已打扫' "}],attrs:{type:"primary",size:"small"},on:{click:function(a){return e.openModifyDialog(t.$index,t.row)}}},[e._v("续住\n            ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"住人待打扫"===t.row.status||"住人已打扫"===t.row.status,expression:"scope.row.status==='住人待打扫' ||scope.row.status==='住人已打扫' "}],attrs:{type:"danger",size:"small"},on:{click:function(a){return e.openCheckOutDialog(t.$index,t.row)}}},[e._v("退房\n            ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"空房待打扫"===t.row.status||"住人待打扫"===t.row.status,expression:"scope.row.status==='空房待打扫' ||scope.row.status==='住人待打扫' "}],staticStyle:{margin:"0"},attrs:{type:"success",size:"small"},on:{click:function(a){return e.cleanRoom(t.$index,t.row)}}},[e._v("打扫\n            ")])]}}])})],1)],1),e._v(" "),a("el-pagination",{attrs:{layout:"prev,pager,next,total","page-size":e.pageSize,total:e.total,background:""},on:{"current-change":e.changePage}})],1),e._v(" "),a("el-dialog",{attrs:{title:"入住",visible:e.showCheckInDialog,center:"","before-close":e.closeCheckInDialog},on:{"update:visible":function(t){e.showCheckInDialog=t}}},[a("el-form",{ref:"checkInRoom",attrs:{model:e.checkInRoom.order,rules:e.checkInRoomRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"房间"}},[e._v(e._s(e.checkInRoom.roomNumber+"-"+e.checkInRoom.type))]),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"realName"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.checkInRoom.order.realName,callback:function(t){e.$set(e.checkInRoom.order,"realName",t)},expression:"checkInRoom.order.realName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.checkInRoom.order.idCard,callback:function(t){e.$set(e.checkInRoom.order,"idCard",t)},expression:"checkInRoom.order.idCard"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"emailAddress"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.checkInRoom.order.emailAddress,callback:function(t){e.$set(e.checkInRoom.order,"emailAddress",t)},expression:"checkInRoom.order.emailAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"入住时间",prop:"date"}},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["12:00:00","12:00:00"],"picker-options":e.checkInPickerOptions},model:{value:e.checkInRoom.order.date,callback:function(t){e.$set(e.checkInRoom.order,"date",t)},expression:"checkInRoom.order.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮件通知",prop:"inform"}},[a("el-checkbox",{model:{value:e.checkInRoom.order.inform,callback:function(t){e.$set(e.checkInRoom.order,"inform",t)},expression:"checkInRoom.order.inform"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.checkIn}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:e.closeCheckInDialog}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"退房",visible:e.showCheckOutDialog,center:"","before-close":e.closeCheckOutDialog},on:{"update:visible":function(t){e.showCheckOutDialog=t}}},[a("el-form",{ref:"checkOutRoom",attrs:{model:e.checkOutRoom.order,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"房间"}},[e._v(e._s(e.checkOutRoom.roomNumber+"-"+e.checkOutRoom.type))]),e._v(" "),a("el-form-item",{attrs:{label:"评分"}},[a("el-rate",{attrs:{"show-text":""},model:{value:e.checkOutRoom.order.rate,callback:function(t){e.$set(e.checkOutRoom.order,"rate",t)},expression:"checkOutRoom.order.rate"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.checkOut}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:e.closeCheckOutDialog}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var Fe={name:"RoomCheckIn",components:{RoomSelectCriteria:ye,RoomSelectResult:a("VU/8")(_e,ke,!1,function(e){a("bJ2k")},"data-v-b67e36aa",null).exports},data:function(){return{rooms:[],selectLoading:!1,roomTypes:[]}},mounted:function(){this.initialize()},methods:{initialize:function(){var e=this;this.currFrontUser=JSON.parse(localStorage.getItem("currFrontUser")),this.$axios.post("room/getAllRooms",this.currFrontUser.aid).then(function(t){e.rooms=t.data.data.roomDtoList,0===t.data.data.roomTypeDtos.length?e.roomTypes=k.roomTypes:e.roomTypes=t.data.data.roomTypeDtos}).catch(function(e){})},changeLoading:function(e){var t=this;e?this.selectLoading=e:setTimeout(function(){t.selectLoading=e},1e3)},getSpecialRooms:function(e){this.rooms=e}}},$e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("room-select-criteria",{attrs:{selectLoading:e.selectLoading,types:e.roomTypes},on:{changeLoading:function(t){return e.changeLoading(t)},getSpecialRooms:function(t){return e.getSpecialRooms(t)}}}),e._v(" "),a("br"),e._v(" "),a("room-select-result",{attrs:{rooms:e.rooms,selectLoading:e.selectLoading}})],1)],1)},staticRenderFns:[]};var Re=a("VU/8")(Fe,$e,!1,function(e){a("xw7Y")},"data-v-e8479bdc",null).exports,Se={name:"Order",data:function(){return{currentPage:1,total:0,pageSize:10,orderTable:[],orderLoading:!1,date:"",pickerOptions:{disabledDate:function(e){},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近一年",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-31536e6),e.$emit("pick",[a,t])}}]}}},mounted:function(){this.initializeOrder()},methods:{initializeOrder:function(){var e=this;this.orderLoading=!0,this.currAdmin=JSON.parse(localStorage.getItem("currAdmin")),this.currFrontUser=JSON.parse(localStorage.getItem("currFrontUser"));var t="";t=null!=this.currAdmin?this.currAdmin.aid:this.currFrontUser.aid,this.$axios.post("order/getAllOrders",t).then(function(t){if(0!=t.data.data.length){e.orderTable=t.data.data,e.total=t.data.data.length;var a=!0,o=!1,r=void 0;try{for(var l,n=ce()(e.orderTable);!(a=(l=n.next()).done);a=!0){var i=l.value;i.startDate=i.date[0],i.endDate=i.date[1]}}catch(e){o=!0,r=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw r}}}e.orderLoading=!1}).catch(function(e){})},displaySelectedOrder:function(){var e=this;this.orderLoading=!0,this.currAdmin=JSON.parse(localStorage.getItem("currAdmin")),this.currFrontUser=JSON.parse(localStorage.getItem("currFrontUser"));var t="";t=null!=this.currAdmin?this.currAdmin.aid:this.currFrontUser.aid,this.$axios.post("order/getOrdersByDate",{aid:t,startDate:this.date[0],endDate:this.date[1]}).then(function(t){if(0!=t.data.data.length){e.orderTable=t.data.data,e.total=t.data.data.length;var a=!0,o=!1,r=void 0;try{for(var l,n=ce()(e.orderTable);!(a=(l=n.next()).done);a=!0){var i=l.value;i.startDate=i.date[0],i.endDate=i.date[1]}}catch(e){o=!0,r=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw r}}}e.orderLoading=!1}).catch(function(t){e.$message.error(t)}),setTimeout(function(){e.orderLoading=!1},2e3)},changePage:function(e){this.currentPage=e},sendEmail:function(e,t){var a=this;this.$axios.post("order/sendEmailToCus",t).then(function(e){e.data.success||a.$message.error(e.data.data),a.$message.success("邮件已发送！")}).catch(function(e){a.$message.error(e)})},filterOrderStatus:function(e,t){return t.status===e}}},Ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("el-container",[a("el-main",[a("el-card",{attrs:{shadow:"always"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px"}},[e._v("\n          时间选择\n          "),a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":"","picker-options":e.pickerOptions,"default-time":["00:00:00","23:59:59"]},on:{change:e.displaySelectedOrder},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)]),e._v(" "),a("br"),e._v(" "),a("el-card",{attrs:{shadow:"always"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.orderLoading,expression:"orderLoading"}],attrs:{data:e.orderTable.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),"default-sort":{prop:"roomNumber",order:"ascending"},border:""}},[a("el-table-column",{attrs:{label:"序号",width:"50px",align:"center",prop:"serialNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"房间",width:"55px",align:"center",prop:"roomNumber"}}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",width:"80px",align:"center",prop:"realName"}}),e._v(" "),a("el-table-column",{attrs:{label:"身份证号",width:"163px",align:"center",prop:"idCard"}}),e._v(" "),a("el-table-column",{attrs:{label:"邮箱地址",width:"158px",align:"center",prop:"emailAddress"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"80px",align:"center",prop:"status",filters:[{text:"离店",value:"离店"},{text:"入住",value:"入住"},{text:"预订",value:"预订"}],"filter-method":e.filterOrderStatus}}),e._v(" "),a("el-table-column",{attrs:{label:"消费",width:"85px",align:"center",prop:"cost"}}),e._v(" "),a("el-table-column",{attrs:{label:"开始时间",width:"250px",align:"center",prop:"startDate"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy 年 MM 月 dd 日 HH点",disabled:""},model:{value:t.row.startDate,callback:function(a){e.$set(t.row,"startDate",a)},expression:"scope.row.startDate"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"结束时间",width:"250px",align:"center",prop:"endDate"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy 年 MM 月 dd 日 HH点",disabled:""},model:{value:t.row.endDate,callback:function(a){e.$set(t.row,"endDate",a)},expression:"scope.row.endDate"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"邮件通知",width:"50px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{attrs:{disabled:""},model:{value:t.row.inform,callback:function(a){e.$set(t.row,"inform",a)},expression:"scope.row.inform"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作员",width:"100px",align:"center",prop:"frontUserName"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:("预订"===t.row.status||"入住"===t.row.status)&&t.row.inform,expression:"(scope.row.status==='预订' ||scope.row.status==='入住') && scope.row.inform "}],attrs:{type:"primary",size:"small"},on:{click:function(a){return e.sendEmail(t.$index,t.row)}}},[e._v("发送邮件\n              ")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{layout:"prev,pager,next,total","page-size":e.pageSize,total:e.total,background:""},on:{"current-change":e.changePage}})],1)],1)],1)],1)},staticRenderFns:[]};var Ce=a("VU/8")(Se,Ae,!1,function(e){a("/mff")},"data-v-16df444f",null).exports;o.default.use(n.a);var Te=new n.a({routes:[{path:"/",redirect:"/login"},{path:"*",redirect:"/login"},{path:"/index",name:"Index",component:C},{path:"/manage",redirect:"/login"},{path:"/login",name:"Login",component:x},{path:"/register",name:"register",component:R},{path:"/frontUser",redirect:"/frontUser/room/checkIn",name:"frontUser",component:U,children:[{path:"/frontUser/room",component:ge,children:[{path:"/frontUser/room/checkIn",component:Re}]},{path:"/order",component:Ce}]},{path:"/admin",redirect:"/admin/home",name:"admin",component:U,children:[{path:"/admin/home",component:H},{path:"/admin/room",component:ge,children:[{path:"/admin/room/status",component:he},{path:"/admin/room/checkIn",component:Re}]},{path:"/order",component:Ce},{path:"/admin/report",component:te,children:[{path:"/admin/report/days",component:Q},{path:"/admin/report/set",component:re}]},{path:"/admin/setting",component:q,children:[{path:"/admin/setting/info",component:ie},{path:"/admin/setting/frontUser",component:Y}]}]}]}),Ne=a("zL8q"),De=a.n(Ne),Ie=(a("tvR6"),a("mtWM")),Ue=a.n(Ie);a("D5b9"),a("AL/Z");Ue.a.defaults.baseURL="http://localhost:8080/api",Ue.a.defaults.headers.post["Content-Type"]="application/json;charset=utf-8",o.default.prototype.$axios=Ue.a,o.default.config.productionTip=!1,o.default.use(De.a),Te.beforeEach(function(e,t,a){if(e.matched.some(function(e){return e.meta.requireLogin}))if(localStorage.name)a();else{if("login"===e.name)return void a();a({path:"/",query:{redirect:e.fullPath}})}else a()}),new o.default({el:"#app",router:Te,components:{App:l},template:"<App/>"})},ONK8:function(e,t){},"QX+9":function(e,t){},RY6c:function(e,t){},U8AM:function(e,t){},"WB+h":function(e,t){},ZlbB:function(e,t){},bJ2k:function(e,t){},bwPF:function(e,t){},cAU4:function(e,t){},ccvo:function(e,t){},e5qD:function(e,t){},hA51:function(e,t){},pVwh:function(e,t){},r2ji:function(e,t){},rn7Y:function(e,t){},s347:function(e,t){},tvR6:function(e,t){},wTaG:function(e,t){},xKoU:function(e,t){},xw7Y:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e682eaacc8ffb3a4d5c1.js.map